"use strict";(self.webpackChunkcoreui_free_angular_admin_template=self.webpackChunkcoreui_free_angular_admin_template||[]).push([[405],{5405:(ge,Z,l)=>{l.r(Z),l.d(Z,{CustomCurrencyMaskConfig:()=>M,PriceModule:()=>de});var g=l(6895),a=l(433),v=l(243),b=l(5861),e=l(1571),C=l(805),N=l(5471);let S=(()=>{class r{constructor(t,n){this.api=t,this.router=n}getAll(){return this.api.get("price-group")}getOne(t){return this.api.get("price-group/"+t)}update(t){return this.api.put("price-group",t)}add(t){return this.api.post("price-group",t)}delete(t){return this.api.delete("price-group/"+t)}}return r.\u0275fac=function(t){return new(t||r)(e.LFG(N.O),e.LFG(v.F0))},r.\u0275prov=e.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();var x=l(4325),T=l(1831),w=l(2054),c=l(4980),y=l(1740),E=l(5593),I=l(585);function D(r,i){1&r&&(e.TgZ(0,"span"),e._uU(1,"Kh\xf4ng \u0111\u01b0\u1ee3c \u0111\u1ec3 tr\u1ed1ng."),e.qZA())}function P(r,i){1&r&&(e.TgZ(0,"span"),e._uU(1,"V\u01b0\u1ee3t qu\xe1 chi\u1ec1u d\xe0i cho ph\xe9p."),e.qZA())}function k(r,i){if(1&r&&(e.TgZ(0,"small",13),e.YNc(1,D,2,0,"span",14),e.YNc(2,P,2,0,"span",14),e.qZA()),2&r){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",null==t.form.controls.name.errors?null:t.form.controls.name.errors.required),e.xp6(1),e.Q6J("ngIf",null==t.form.controls.name.errors?null:t.form.controls.name.errors.maxlength)}}const U=function(){return{"margin-right":"10px"}};let F=(()=>{class r{constructor(t,n,s,o,u,p,m,h){this.fb=t,this.messageService=n,this.service=s,this.ref=o,this.config=u,this.router=p,this.store=m,this.spinner=h,this.currDate=new Date,this.form=new a.cw({name:new a.NI(null,[a.kI.required,a.kI.maxLength(500)]),description:new a.NI(null,[a.kI.maxLength(2e3)]),effectiveDate:new a.NI(new Date),expiredDate:new a.NI(new Date(this.currDate.setFullYear(this.currDate.getFullYear()+10))),baseRate:new a.NI(0)}),this.lisCustomerGroup=[],this.isSubmit=!1}ngOnInit(){return(0,b.Z)(function*(){})()}onSubmit(){this.isSubmit=!0,this.form.invalid||(this.spinner.onShow(),this.service.add(this.form.value).subscribe(n=>{this.spinner.onHide(),n.code>0?(this.isSubmit=!1,this.messageService.add({severity:"success",summary:"Success",detail:n.msg}),setTimeout(()=>{this.ref.close(!0)},500)):(this.isSubmit=!1,this.messageService.add({severity:"error",summary:"Error",detail:n.msg}))}))}onCancel(){this.ref.close(!1)}}return r.\u0275fac=function(t){return new(t||r)(e.Y36(a.qu),e.Y36(C.ez),e.Y36(S),e.Y36(x.E7),e.Y36(x.S),e.Y36(v.F0),e.Y36(T.yh),e.Y36(w.V))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-price-group-add"]],decls:33,vars:14,consts:[[1,"price-container"],[1,"warp-content"],["id","form","method","post","autocomplete","off",1,"row","g-3",3,"formGroup","ngSubmit"],[3,"md"],[1,"required"],["cFormControl","","required","","maxlength","50","type","text","formControlName","name","pInputText","",1,"txt-sm-full"],["class","p-error block",4,"ngIf"],["dateFormat","dd/mm/yy","formControlName","effectiveDate","inputId","icon",1,"calendar-sm",3,"showIcon"],["dateFormat","dd/mm/yy","formControlName","expiredDate","inputId","icon",1,"calendar-sm",3,"showIcon"],["cFormControl","","required","","type","text","formControlName","baseRate","pInputText","",1,"txt-sm-full"],["rows","1","cFormControl","","maxlength","500","type","text","formControlName","description","pInputText","",1,"txt-sm-full"],["type","submit","label","Save","icon","pi pi-check","styleClass","p-button-sm"],["label","Cancel","icon","pi pi-ban","styleClass","p-button-sm p-button-secondary",3,"onClick"],[1,"p-error","block"],[4,"ngIf"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"c-container",1)(2,"form",2),e.NdJ("ngSubmit",function(){return n.onSubmit()}),e.TgZ(3,"c-row")(4,"c-col",3)(5,"h6"),e._uU(6,"T\xean nh\xf3m gi\xe1 "),e._UZ(7,"span",4),e.qZA(),e._UZ(8,"input",5),e.YNc(9,k,3,2,"small",6),e.qZA(),e.TgZ(10,"c-col",3)(11,"h6"),e._uU(12,"Ng\xe0y hi\u1ec7u l\u1ef1c "),e._UZ(13,"span",4),e.qZA(),e._UZ(14,"p-calendar",7),e.qZA(),e.TgZ(15,"c-col",3)(16,"h6"),e._uU(17,"Ng\xe0y h\u1ebft h\u1ea1n "),e._UZ(18,"span",4),e.qZA(),e._UZ(19,"p-calendar",8),e.qZA()(),e.TgZ(20,"c-row")(21,"c-col",3)(22,"h6"),e._uU(23,"T\u1ec9 l\u1ec7 chi\u1ebft kh\u1ea5u (%)"),e.qZA(),e._UZ(24,"input",9),e.qZA(),e.TgZ(25,"c-col",3)(26,"h6"),e._uU(27,"M\xf4 t\u1ea3"),e.qZA(),e._UZ(28,"textarea",10),e.qZA()(),e.TgZ(29,"c-row")(30,"c-col"),e._UZ(31,"p-button",11),e.TgZ(32,"p-button",12),e.NdJ("onClick",function(){return n.onCancel()}),e.qZA()()()()()()),2&t&&(e.xp6(2),e.Q6J("formGroup",n.form),e.xp6(2),e.Q6J("md",4),e.xp6(4),e.ekj("ng-dirty",n.isSubmit&&n.form.controls.name.errors),e.xp6(1),e.Q6J("ngIf",n.isSubmit&&n.form.controls.name.errors),e.xp6(1),e.Q6J("md",4),e.xp6(4),e.Q6J("showIcon",!0),e.xp6(1),e.Q6J("md",4),e.xp6(4),e.Q6J("showIcon",!0),e.xp6(2),e.Q6J("md",4),e.xp6(4),e.Q6J("md",8),e.xp6(6),e.Akn(e.DdM(13,U)))},dependencies:[g.O5,a._Y,a.Fj,a.JJ,a.JL,a.Q7,a.nD,a.sg,a.u,c.e$z,c.iok,c.Yp0,c.oHf,y.o,E.zx,I.f]}),r})();function G(r,i){1&r&&(e.TgZ(0,"span"),e._uU(1,"Kh\xf4ng \u0111\u01b0\u1ee3c \u0111\u1ec3 tr\u1ed1ng."),e.qZA())}function R(r,i){1&r&&(e.TgZ(0,"span"),e._uU(1,"V\u01b0\u1ee3t qu\xe1 chi\u1ec1u d\xe0i cho ph\xe9p."),e.qZA())}function Y(r,i){if(1&r&&(e.TgZ(0,"small",13),e.YNc(1,G,2,0,"span",14),e.YNc(2,R,2,0,"span",14),e.qZA()),2&r){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",null==t.form.controls.name.errors?null:t.form.controls.name.errors.required),e.xp6(1),e.Q6J("ngIf",null==t.form.controls.name.errors?null:t.form.controls.name.errors.maxlength)}}const q=function(){return{"margin-right":"10px"}};let O=(()=>{class r{constructor(t,n,s,o,u,p,m,h){this.fb=t,this.messageService=n,this.service=s,this.ref=o,this.config=u,this.router=p,this.store=m,this.spinner=h,this.currDate=new Date,this.form=new a.cw({name:new a.NI(null,[a.kI.required,a.kI.maxLength(500)]),description:new a.NI(null,[a.kI.maxLength(2e3)]),effectiveDate:new a.NI(new Date),expiredDate:new a.NI(new Date(this.currDate.setFullYear(this.currDate.getFullYear()+10))),baseRate:new a.NI(0),id:new a.NI(null)}),this.lisCustomerGroup=[],this.isSubmit=!1,this.idPriceGroup=this.config.data,this.service.getOne(this.idPriceGroup).subscribe(d=>{d.data.effectiveDate=new Date(d.data.effectiveDate),d.data.expiredDate=new Date(d.data.expiredDate),this.form.patchValue(d.data)})}ngOnInit(){return(0,b.Z)(function*(){})()}onSubmit(){this.isSubmit=!0,this.form.invalid||(this.spinner.onShow(),this.service.update(this.form.value).subscribe(n=>{this.spinner.onHide(),n.code>0?(this.isSubmit=!1,this.messageService.add({severity:"success",summary:"Success",detail:n.msg}),setTimeout(()=>{this.ref.close(!0)},500)):(this.isSubmit=!1,this.messageService.add({severity:"error",summary:"Error",detail:n.msg}))}))}onCancel(){this.ref.close(!1)}}return r.\u0275fac=function(t){return new(t||r)(e.Y36(a.qu),e.Y36(C.ez),e.Y36(S),e.Y36(x.E7),e.Y36(x.S),e.Y36(v.F0),e.Y36(T.yh),e.Y36(w.V))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-price-group-update"]],decls:33,vars:16,consts:[[1,"price-container"],[1,"warp-content"],["id","form","method","post","autocomplete","off",1,"row","g-3",3,"formGroup","ngSubmit"],[3,"md"],[1,"required"],["cFormControl","","required","","maxlength","50","type","text","formControlName","name","pInputText","",1,"txt-sm-full"],["class","p-error block",4,"ngIf"],["dateFormat","dd/mm/yy","formControlName","effectiveDate","inputId","icon",1,"calendar-sm",3,"showIcon"],["dateFormat","dd/mm/yy","formControlName","expiredDate","inputId","icon",1,"calendar-sm",3,"showIcon"],["cFormControl","","required","","type","text","formControlName","baseRate","pInputText","",1,"txt-sm-full",3,"min","max"],["rows","1","cFormControl","","maxlength","500","type","text","formControlName","description","pInputText","",1,"txt-sm-full"],["type","submit","label","Save","icon","pi pi-check","styleClass","p-button-sm"],["label","Cancel","icon","pi pi-ban","styleClass","p-button-sm p-button-secondary",3,"onClick"],[1,"p-error","block"],[4,"ngIf"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"c-container",1)(2,"form",2),e.NdJ("ngSubmit",function(){return n.onSubmit()}),e.TgZ(3,"c-row")(4,"c-col",3)(5,"h6"),e._uU(6,"T\xean nh\xf3m gi\xe1 "),e._UZ(7,"span",4),e.qZA(),e._UZ(8,"input",5),e.YNc(9,Y,3,2,"small",6),e.qZA(),e.TgZ(10,"c-col",3)(11,"h6"),e._uU(12,"Ng\xe0y hi\u1ec7u l\u1ef1c "),e._UZ(13,"span",4),e.qZA(),e._UZ(14,"p-calendar",7),e.qZA(),e.TgZ(15,"c-col",3)(16,"h6"),e._uU(17,"Ng\xe0y h\u1ebft h\u1ea1n "),e._UZ(18,"span",4),e.qZA(),e._UZ(19,"p-calendar",8),e.qZA()(),e.TgZ(20,"c-row")(21,"c-col",3)(22,"h6"),e._uU(23,"T\u1ec9 l\u1ec7 chi\u1ebft kh\u1ea5u (%)"),e.qZA(),e._UZ(24,"input",9),e.qZA(),e.TgZ(25,"c-col",3)(26,"h6"),e._uU(27,"M\xf4 t\u1ea3"),e.qZA(),e._UZ(28,"textarea",10),e.qZA()(),e.TgZ(29,"c-row")(30,"c-col"),e._UZ(31,"p-button",11),e.TgZ(32,"p-button",12),e.NdJ("onClick",function(){return n.onCancel()}),e.qZA()()()()()()),2&t&&(e.xp6(2),e.Q6J("formGroup",n.form),e.xp6(2),e.Q6J("md",4),e.xp6(4),e.ekj("ng-dirty",n.isSubmit&&n.form.controls.name.errors),e.xp6(1),e.Q6J("ngIf",n.isSubmit&&n.form.controls.name.errors),e.xp6(1),e.Q6J("md",4),e.xp6(4),e.Q6J("showIcon",!0),e.xp6(1),e.Q6J("md",4),e.xp6(4),e.Q6J("showIcon",!0),e.xp6(2),e.Q6J("md",4),e.xp6(3),e.Q6J("min",0)("max",100),e.xp6(1),e.Q6J("md",8),e.xp6(6),e.Akn(e.DdM(15,q)))},dependencies:[g.O5,a._Y,a.Fj,a.JJ,a.JL,a.Q7,a.nD,a.sg,a.u,c.e$z,c.iok,c.Yp0,c.oHf,y.o,E.zx,I.f]}),r})();var J=l(2557),H=l(2453),_=l(99),L=l(2137),B=l(3608);const Q=["dtcustomergroup"],K=function(){return{"margin-top":"5px","margin-right":"5px"}};function z(r,i){if(1&r){const t=e.EpF();e.TgZ(0,"c-row")(1,"c-col",7)(2,"div",8)(3,"span",9),e._UZ(4,"i",10),e.qZA(),e.TgZ(5,"input",11),e.NdJ("input",function(s){e.CHM(t);const o=e.oxw();return e.KtG(o.applyFilterGlobal(s,"contains"))}),e.qZA()()(),e.TgZ(6,"c-col",12)(7,"p-button",13),e.NdJ("onClick",function(){e.CHM(t);const s=e.oxw();return e.KtG(s.showDialogAdd())}),e.qZA()()()}2&r&&(e.xp6(7),e.Akn(e.DdM(2,K)))}function j(r,i){if(1&r){const t=e.EpF();e.TgZ(0,"tr")(1,"th",14),e._uU(2," Stt"),e.qZA(),e.TgZ(3,"th",15),e._UZ(4,"p-sortIcon",16),e._uU(5,"Nh\xf3m gi\xe1 "),e.qZA(),e.TgZ(6,"th",17),e._UZ(7,"p-sortIcon",18),e._uU(8,"Base "),e.qZA(),e.TgZ(9,"th",19),e._UZ(10,"p-sortIcon",20),e._uU(11,"Ng\xe0y hi\u1ec7u l\u1ef1c "),e.qZA(),e.TgZ(12,"th",21),e._UZ(13,"p-sortIcon",22),e._uU(14,"Ng\xe0y h\u1ebft h\u1ea1n "),e.qZA(),e.TgZ(15,"th",23),e._UZ(16,"p-sortIcon",24),e._uU(17,"M\xf4 t\u1ea3 "),e.qZA(),e.TgZ(18,"th",25),e._UZ(19,"p-sortIcon",26),e._uU(20,"Last modify "),e.qZA(),e.TgZ(21,"th",27),e._uU(22," Ch\u1ec9nh s\u1eeda "),e.TgZ(23,"i",28),e.NdJ("click",function(){e.CHM(t);const s=e.oxw(),o=e.MAs(5);return e.KtG(s.clear(o))}),e.qZA()()()}}function W(r,i){if(1&r){const t=e.EpF();e.TgZ(0,"tr")(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.qZA(),e.TgZ(7,"td"),e._uU(8),e.qZA(),e.TgZ(9,"td"),e._uU(10),e.qZA(),e.TgZ(11,"td"),e._uU(12),e.qZA(),e.TgZ(13,"td"),e._uU(14),e._UZ(15,"br"),e._uU(16),e.qZA(),e.TgZ(17,"td")(18,"i",29),e.NdJ("click",function(){const o=e.CHM(t).$implicit,u=e.oxw();return e.KtG(u.showDialogEdit(o.id))}),e.qZA(),e.TgZ(19,"i",30),e.NdJ("click",function(){const o=e.CHM(t).$implicit,u=e.oxw();return e.KtG(u.showDialogDelete(o.id))}),e.qZA()()()}if(2&r){const t=i.$implicit,n=i.rowIndex,s=e.oxw();e.xp6(2),e.Oqu(n+1),e.xp6(2),e.Oqu(t.name),e.xp6(2),e.Oqu(t.baseRate),e.xp6(2),e.Oqu(s.commonService.strFormatDate(t.effectiveDate)),e.xp6(2),e.Oqu(s.commonService.strFormatDate(t.expiredDate)),e.xp6(2),e.Oqu(t.description),e.xp6(2),e.hij("",t.lastModifyingUser," "),e.xp6(2),e.hij(" ",s.commonService.strFormatDate(t.lastModifiedDate)," ")}}const $=function(){return{width:"50vw",maxWidth:"500px"}},X=function(){return["name","description","effectiveDate","expriedDate","baseRate"]},ee=[{path:"",redirectTo:"price",pathMatch:"full"},{path:"",data:{title:"Qu\u1ea3n l\xfd gi\xe1"},children:[{path:"",pathMatch:"full",redirectTo:"price"},{path:"price-group",component:(()=>{class r{constructor(t,n,s,o,u,p,m,h){this.service=t,this.fb=n,this.messageService=s,this.location=o,this.confirmService=u,this.commonService=p,this.DialogService=m,this.spinner=h,this.priceGroupList=[]}ngOnInit(){this.spinner.onShow(),this.service.getAll().subscribe(t=>{this.spinner.onHide(),this.priceGroupList=t.data})}applyFilterGlobal(t,n){this.dtcustomergroup?.filterGlobal(t.target.value,n)}showDialogAdd(){this.DialogService.open(F,{data:null,header:"Th\xeam nh\xf3m gi\xe1",style:{"max-width":"900px",overflow:"none"},contentStyle:{overflow:"unset"},baseZIndex:1e4,closable:!1}).onClose.subscribe(n=>{n&&(this.ngOnInit(),this.clear(this.dtcustomergroup))})}showDialogEdit(t){this.DialogService.open(O,{data:t,header:"Ch\u1ec9nh s\u1eeda nh\xf3m gi\xe1",style:{"max-width":"900px",overflow:"none"},contentStyle:{overflow:"unset"},baseZIndex:1e4,closable:!1}).onClose.subscribe(s=>{s&&(this.ngOnInit(),this.clear(this.dtcustomergroup))})}showDialogDelete(t){this.confirmService.confirm({key:"confirm-delete",message:"B\u1ea1n c\xf3 th\u1eadt s\u1ef1 mu\u1ed1n x\xf3a?",header:"Th\xf4ng b\xe1o",icon:"pi pi-exclamation-triangle",accept:()=>{this.service.delete(t).subscribe(n=>{1===n.code?(this.messageService.add({severity:"success",summary:"Success",detail:n.msg}),this.ngOnInit()):this.messageService.add(0===n.code?{severity:"error",summary:"Error",detail:"C\xf3 kh\xe1ch h\xe0ng thu\u1ed9c nh\xf3m kh\xe1ch h\xe0ng n\xe0y. Kh\xf4ng th\u1ec3 x\xf3a nh\xf3m kh\xe1ch h\xe0ng!"}:{severity:"error",summary:"Error",detail:n.msg})})},reject:()=>{}})}clear(t){t?.clear(),this.ngOnInit()}}return r.\u0275fac=function(t){return new(t||r)(e.Y36(S),e.Y36(a.qu),e.Y36(C.ez),e.Y36(g.Ye),e.Y36(C.YP),e.Y36(J.v),e.Y36(x.xA),e.Y36(w.V))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-price-group-list"]],viewQuery:function(t,n){if(1&t&&e.Gf(Q,5),2&t){let s;e.iGM(s=e.CRH())&&(n.dtcustomergroup=s.first)}},decls:9,vars:7,consts:[[1,"warp-content"],["key","confirm-delete",3,"baseZIndex"],["dataKey","id","styleClass","p-datatable-sm","responsiveLayout","scroll","breakpoint","1200px",3,"value","globalFilterFields"],["dtcustomergroup",""],["pTemplate","caption"],["pTemplate","header"],["pTemplate","body"],[1,"d-flex","flex-row-start","align-items-center"],[1,"p-inputgroup",2,"width","60%"],[1,"p-inputgroup-addon"],[1,"pi","pi-search"],["pInputText","","type","text","placeholder","T\xecm ki\u1ebfm...",3,"input"],[1,"d-flex","justify-content-end"],["icon","pi pi-plus","styleClass","p-button-rounded p-button-secondary p-button-outlined",1,"p-button-sm","p-button-add-new",3,"onClick"],[2,"width","5%"],["pSortableColumn","name",2,"width","12%"],["field","name"],["pSortableColumn","baseRate",2,"width","6%"],["field","baseRate"],["pSortableColumn","effectiveDate",2,"width","10%"],["field","effectiveDate"],["pSortableColumn","expriedDate",2,"width","10%"],["field","expriedDate"],["pSortableColumn","description"],["field","description"],["pSortableColumn","lastModifyingUser",2,"width","12%"],["field","lastModifyingUser"],[2,"width","8%"],["pTooltip","Click to refresh",1,"pi","pi-sync",2,"cursor","pointer",3,"click"],["pTooltip","Ch\u1ec9nh s\u1eeda",1,"pi","pi-user-edit","btn-icon-table","edit",2,"margin-right","8px",3,"click"],["pTooltip","X\xf3a",1,"pi","pi-trash","btn-icon-table","remove",2,"margin-left","8px","margin-right","8px",3,"click"]],template:function(t,n){1&t&&(e.TgZ(0,"c-container",0),e._UZ(1,"p-toast")(2,"p-confirmDialog",1),e.TgZ(3,"c-row")(4,"p-table",2,3),e.YNc(6,z,8,3,"ng-template",4),e.YNc(7,j,24,0,"ng-template",5),e.YNc(8,W,20,8,"ng-template",6),e.qZA()()()),2&t&&(e.xp6(2),e.Akn(e.DdM(5,$)),e.Q6J("baseZIndex",1e4),e.xp6(2),e.Q6J("value",n.priceGroupList)("globalFilterFields",e.DdM(6,X)))},dependencies:[c.e$z,c.iok,c.Yp0,H.FN,C.jx,_.iA,_.lQ,_.fz,y.o,E.zx,L.Q,B.u]}),r})(),data:{title:"Nh\xf3m gi\xe1"}}]}];let te=(()=>{class r{}return r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=e.oAB({type:r}),r.\u0275inj=e.cJS({imports:[v.Bz.forChild(ee),v.Bz]}),r})();var ie=l(7893),ne=l(2928);let A=new e.OlP("currency.mask.config");class re{constructor(i){this.htmlInputElement=i}setCursorAt(i){if(this.htmlInputElement.setSelectionRange)this.htmlInputElement.focus(),this.htmlInputElement.setSelectionRange(i,i);else if(this.htmlInputElement.createTextRange){let t=this.htmlInputElement.createTextRange();t.collapse(!0),t.moveEnd("character",i),t.moveStart("character",i),t.select()}}updateValueAndCursor(i,t,n){this.rawValue=i,this.setCursorAt(n-=t-i.length)}get canInputMoreNumbers(){let i=!(this.rawValue.length>=this.htmlInputElement.maxLength&&this.htmlInputElement.maxLength>=0),t=this.inputSelection.selectionStart,n=this.inputSelection.selectionEnd,s=!(t==n||!this.htmlInputElement.value.substring(t,n).match(/\d/)),o="0"==this.htmlInputElement.value.substring(0,1);return i||s||o}get inputSelection(){let i=0,t=0;if("number"==typeof this.htmlInputElement.selectionStart&&"number"==typeof this.htmlInputElement.selectionEnd)i=this.htmlInputElement.selectionStart,t=this.htmlInputElement.selectionEnd;else{let n=document.getSelection().anchorNode;if(n&&n.firstChild==this.htmlInputElement){let s=this.htmlInputElement.value.length,o=this.htmlInputElement.value.replace(/\r\n/g,"\n"),u=this.htmlInputElement.createTextRange(),p=this.htmlInputElement.createTextRange();p.collapse(!1),u.compareEndPoints("StartToEnd",p)>-1?i=t=s:(i=-u.moveStart("character",-s),i+=o.slice(0,i).split("\n").length-1,u.compareEndPoints("EndToEnd",p)>-1?t=s:(t=-u.moveEnd("character",-s),t+=o.slice(0,t).split("\n").length-1))}}return{selectionStart:i,selectionEnd:t}}get rawValue(){return this.htmlInputElement&&this.htmlInputElement.value}set rawValue(i){this._storedRawValue=i,this.htmlInputElement&&(this.htmlInputElement.value=i)}get storedRawValue(){return this._storedRawValue}}class se{constructor(i,t){this.htmlInputElement=i,this.options=t,this.inputManager=new re(i)}addNumber(i){this.rawValue||(this.rawValue=this.applyMask(!1,"0"));let t=String.fromCharCode(i),n=this.inputSelection.selectionStart,s=this.inputSelection.selectionEnd;this.rawValue=this.rawValue.substring(0,n)+t+this.rawValue.substring(s,this.rawValue.length),this.updateFieldValue(n+1)}applyMask(i,t){let{allowNegative:n,decimal:s,precision:o,prefix:u,suffix:p,thousands:m}=this.options,h=(t=i?new Number(t).toFixed(o):t).replace(/[^0-9]/g,"");if(!h)return"";let d=h.slice(0,h.length-o).replace(/^0*/g,"").replace(/\B(?=(\d{3})+(?!\d))/g,m);""==d&&(d="0");let V=d,f=h.slice(h.length-o);o>0&&(f="0".repeat(o-f.length)+f,V+=s+f);let me=0==parseInt(d)&&(0==parseInt(f)||""==f);return(t.indexOf("-")>-1&&n&&!me?"-":"")+u+V+p}clearMask(i){if(null==i||""==i)return null;let t=i.replace(this.options.prefix,"").replace(this.options.suffix,"");return this.options.thousands&&(t=t.replace(new RegExp("\\"+this.options.thousands,"g"),"")),this.options.decimal&&(t=t.replace(this.options.decimal,".")),parseFloat(t)}changeToNegative(){if(this.options.allowNegative&&""!=this.rawValue&&"-"!=this.rawValue.charAt(0)&&0!=this.value){let i=this.inputSelection.selectionStart;this.rawValue="-"+this.rawValue,this.updateFieldValue(i+1)}}changeToPositive(){let i=this.inputSelection.selectionStart;this.rawValue=this.rawValue.replace("-",""),this.updateFieldValue(i-1)}fixCursorPosition(i){let t=this.inputSelection.selectionStart;t>this.getRawValueWithoutSuffixEndPosition()||i?this.inputManager.setCursorAt(this.getRawValueWithoutSuffixEndPosition()):t<this.getRawValueWithoutPrefixStartPosition()&&this.inputManager.setCursorAt(this.getRawValueWithoutPrefixStartPosition())}getRawValueWithoutSuffixEndPosition(){return this.rawValue.length-this.options.suffix.length}getRawValueWithoutPrefixStartPosition(){return null!=this.value&&this.value<0?this.options.prefix.length+1:this.options.prefix.length}removeNumber(i){let{decimal:t,thousands:n}=this.options,s=this.inputSelection.selectionEnd,o=this.inputSelection.selectionStart;o>this.rawValue.length-this.options.suffix.length&&(s=this.rawValue.length-this.options.suffix.length,o=this.rawValue.length-this.options.suffix.length),s==o&&((46==i||63272==i)&&/^\d+$/.test(this.rawValue.substring(o,s+1))&&(s+=1),(46==i||63272==i)&&(this.rawValue.substring(o,s+1)==t||this.rawValue.substring(o,s+1)==n)&&(s+=2,o+=1),8==i&&/^\d+$/.test(this.rawValue.substring(o-1,s))&&(o-=1),8==i&&(this.rawValue.substring(o-1,s)==t||this.rawValue.substring(o-1,s)==n)&&(o-=2,s-=1)),this.rawValue=this.rawValue.substring(0,o)+this.rawValue.substring(s,this.rawValue.length),this.updateFieldValue(o)}updateFieldValue(i){let t=this.applyMask(!1,this.rawValue||"");this.inputManager.updateValueAndCursor(t,this.rawValue.length,i=i??this.rawValue.length)}updateOptions(i){let t=this.value;this.options=i,this.value=t}get canInputMoreNumbers(){return this.inputManager.canInputMoreNumbers}get inputSelection(){return this.inputManager.inputSelection}get rawValue(){return this.inputManager.rawValue}set rawValue(i){this.inputManager.rawValue=i}get storedRawValue(){return this.inputManager.storedRawValue}get value(){return this.clearMask(this.rawValue)}set value(i){this.rawValue=this.applyMask(!0,""+i)}}class oe{constructor(i,t){this.inputService=new se(i,t),this.htmlInputElement=i}handleClick(i,t){0==Math.abs(this.inputService.inputSelection.selectionEnd-this.inputService.inputSelection.selectionStart)&&!isNaN(this.inputService.value)&&this.inputService.fixCursorPosition(t)}handleCut(i){this.isReadOnly()||setTimeout(()=>{this.inputService.updateFieldValue(),this.setValue(this.inputService.value),this.onModelChange(this.inputService.value)},0)}handleInput(i){if(this.isReadOnly())return;let t=this.getNewKeyCode(this.inputService.storedRawValue,this.inputService.rawValue),n=this.inputService.rawValue.length,s=this.inputService.inputSelection.selectionEnd,o=this.inputService.getRawValueWithoutSuffixEndPosition(),u=this.inputService.storedRawValue.length;if(this.inputService.rawValue=this.inputService.storedRawValue,s==o&&1==Math.abs(n-u)||0==u){if(n<u&&(0!=this.inputService.value?this.inputService.removeNumber(8):this.setValue(null)),n>u)switch(t){case 43:this.inputService.changeToPositive();break;case 45:this.inputService.changeToNegative();break;default:if(!this.inputService.canInputMoreNumbers||isNaN(this.inputService.value)&&null==String.fromCharCode(t).match(/\d/))return;this.inputService.addNumber(t)}this.setCursorPosition(i),this.onModelChange(this.inputService.value)}else this.setCursorPosition(i)}handleKeydown(i){if(this.isReadOnly())return;let t=i.which||i.charCode||i.keyCode;if(8==t||46==t||63272==t){i.preventDefault();let n=Math.abs(this.inputService.inputSelection.selectionEnd-this.inputService.inputSelection.selectionStart);(n==this.inputService.rawValue.length||0==this.inputService.value)&&(this.setValue(null),this.onModelChange(this.inputService.value)),0==n&&!isNaN(this.inputService.value)&&(this.inputService.removeNumber(t),this.onModelChange(this.inputService.value)),(8===t||46===t)&&0!=n&&!isNaN(this.inputService.value)&&(this.inputService.removeNumber(t),this.onModelChange(this.inputService.value))}}handleKeypress(i){if(this.isReadOnly())return;let t=i.which||i.charCode||i.keyCode;if(null!=t&&-1==[9,13].indexOf(t)&&!this.isArrowEndHomeKeyInFirefox(i)){switch(t){case 43:this.inputService.changeToPositive();break;case 45:this.inputService.changeToNegative();break;default:this.inputService.canInputMoreNumbers&&(!isNaN(this.inputService.value)||null!=String.fromCharCode(t).match(/\d/))&&this.inputService.addNumber(t)}i.preventDefault(),this.onModelChange(this.inputService.value)}}handleKeyup(i){this.inputService.fixCursorPosition()}handlePaste(i){this.isReadOnly()||setTimeout(()=>{this.inputService.updateFieldValue(),this.setValue(this.inputService.value),this.onModelChange(this.inputService.value)},1)}updateOptions(i){this.inputService.updateOptions(i)}getOnModelChange(){return this.onModelChange}setOnModelChange(i){this.onModelChange=i}getOnModelTouched(){return this.onModelTouched}setOnModelTouched(i){this.onModelTouched=i}setValue(i){this.inputService.value=i}getNewKeyCode(i,t){if(i.length>t.length)return null;for(let n=0;n<t.length;n++)if(i.length==n||i[n]!=t[n])return t.charCodeAt(n);return null}isArrowEndHomeKeyInFirefox(i){return-1!=[35,36,37,38,39,40].indexOf(i.keyCode)&&(null==i.charCode||0==i.charCode)}isReadOnly(){return this.htmlInputElement&&this.htmlInputElement.readOnly}setCursorPosition(i){let t=this.inputService.getRawValueWithoutSuffixEndPosition();const n=i.target;setTimeout(function(){n.setSelectionRange(t,t)},0)}}const ae={provide:a.JU,useExisting:(0,e.Gpc)(()=>le),multi:!0};let le=(()=>{class r{constructor(t,n,s){this.currencyMaskConfig=t,this.elementRef=n,this.keyValueDiffers=s,this.options={},this.optionsTemplate={align:"right",allowNegative:!0,decimal:".",precision:2,prefix:"$ ",suffix:"",thousands:","},t&&(this.optionsTemplate=t),this.keyValueDiffer=s.find({}).create()}ngAfterViewInit(){this.elementRef.nativeElement.style.textAlign=this.options.align?this.options.align:this.optionsTemplate.align}ngDoCheck(){this.keyValueDiffer.diff(this.options)&&(this.elementRef.nativeElement.style.textAlign=this.options.align?this.options.align:this.optionsTemplate.align,this.inputHandler.updateOptions(Object.assign({},this.optionsTemplate,this.options)))}ngOnInit(){this.inputHandler=new oe(this.elementRef.nativeElement,Object.assign({},this.optionsTemplate,this.options))}handleBlur(t){this.inputHandler.getOnModelTouched().apply(t)}handleClick(t){this.inputHandler.handleClick(t,this.isChromeAndroid())}handleCut(t){this.isChromeAndroid()||this.inputHandler.handleCut(t)}handleInput(t){this.isChromeAndroid()&&this.inputHandler.handleInput(t)}handleKeydown(t){this.isChromeAndroid()||this.inputHandler.handleKeydown(t)}handleKeypress(t){this.isChromeAndroid()||this.inputHandler.handleKeypress(t)}handleKeyup(t){this.isChromeAndroid()||this.inputHandler.handleKeyup(t)}handlePaste(t){this.isChromeAndroid()||this.inputHandler.handlePaste(t)}isChromeAndroid(){return/chrome/i.test(navigator.userAgent)&&/android/i.test(navigator.userAgent)}registerOnChange(t){this.inputHandler.setOnModelChange(t)}registerOnTouched(t){this.inputHandler.setOnModelTouched(t)}setDisabledState(t){this.elementRef.nativeElement.disabled=t}validate(t){let n={};return t.value>this.max&&(n.max=!0),t.value<this.min&&(n.min=!0),n!={}?n:null}writeValue(t){this.inputHandler.setValue(t)}}return r.\u0275fac=function(t){return new(t||r)(e.Y36(A,8),e.Y36(e.SBq),e.Y36(e.aQg))},r.\u0275dir=e.lG2({type:r,selectors:[["","currencyMask",""]],hostBindings:function(t,n){1&t&&e.NdJ("blur",function(o){return n.handleBlur(o)})("click",function(o){return n.handleClick(o)})("cut",function(o){return n.handleCut(o)})("input",function(o){return n.handleInput(o)})("keydown",function(o){return n.handleKeydown(o)})("keypress",function(o){return n.handleKeypress(o)})("keyup",function(o){return n.handleKeyup(o)})("paste",function(o){return n.handlePaste(o)})},inputs:{max:"max",min:"min",options:"options"},features:[e._Bn([ae,{provide:a.Cf,useExisting:r,multi:!0}])]}),r})(),ue=(()=>{class r{}return r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=e.oAB({type:r}),r.\u0275inj=e.cJS({imports:[[g.ez,a.u5]]}),r})();var ce=l(3336),pe=l(1117);let he=(()=>{class r{}return r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=e.oAB({type:r}),r.\u0275inj=e.cJS({imports:[g.ez]}),r})();const M={align:"right",allowNegative:!0,decimal:".",precision:2,prefix:"",suffix:" VN\u0110",thousands:","};let de=(()=>{class r{}return r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=e.oAB({type:r}),r.\u0275inj=e.cJS({providers:[{provide:A,useValue:M}],imports:[g.ez,a.u5,a.UX,te,ne.s,ie.W,pe.o,he,ue,ce.b]}),r})()}}]);