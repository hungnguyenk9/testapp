"use strict";(self.webpackChunkcoreui_free_angular_admin_template=self.webpackChunkcoreui_free_angular_admin_template||[]).push([[85],{7085:(Ze,Y,c)=>{c.r(Y),c.d(Y,{ProductsModule:()=>_e});var b=c(6895),_=c(243),r=c(433),A=c(1859),t=c(1571),m=c(805),y=c(5471);let w=(()=>{class n{constructor(e,i){this.api=e,this.router=i}getAll(){return this.api.get("item-group")}getOne(e){return this.api.get("item-group/"+e)}update(e){return this.api.put("item-group",e)}add(e){return this.api.post("item-group",e)}delete(e){return this.api.delete("item-group/"+e)}}return n.\u0275fac=function(e){return new(e||n)(t.LFG(y.O),t.LFG(_.F0))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var d=c(4325),v=c(1831),u=c(4980),Z=c(1740),f=c(5593);const z=function(){return{"margin-right":"10px"}};let j=(()=>{class n{constructor(e,i,o,s,a,p,h){this.fb=e,this.messageService=i,this.service=o,this.ref=s,this.config=a,this.router=p,this.store=h,this.code="",this.code=this.config.data,this.service.getOne(this.code).subscribe(g=>{this.form.patchValue(g.data)}),this.form=this.fb.group({name:new r.NI(null),code:new r.NI(null),description:new r.NI(null),lastModifyingUser:new r.NI(null)})}ngOnInit(){this.store.select(A.l).subscribe(e=>{this.form.controls.lastModifyingUser.setValue(e.username)})}onSubmit(){this.form.invalid||this.service.update(this.form.value).subscribe(i=>{1===i.code?(this.messageService.add({key:"toast-item-group-list",severity:"success",summary:"Success",detail:i.msg}),setTimeout(()=>{this.ref.close(!0)},500)):this.messageService.add({key:"toast-item-group-list",severity:"error",summary:"Error",detail:i.msg})})}onCancel(){this.ref.close(!1)}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(r.qu),t.Y36(m.ez),t.Y36(w),t.Y36(d.E7),t.Y36(d.S),t.Y36(_.F0),t.Y36(v.yh))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-item-group-update"]],decls:21,vars:4,consts:[[1,"warp-content"],["id","form","method","post","autocomplete","off",1,"row","g-3",3,"formGroup","ngSubmit"],["type","text","formControlName","code","pInputText","",1,"txt-sm-full"],["type","text","formControlName","name","pInputText","",1,"txt-sm-full"],["type","text","formControlName","description","pInputText","",1,"txt-sm-full"],["type","submit","label","Save","icon","pi pi-check","styleClass","p-button-sm"],["label","Cancel","icon","pi pi-ban","styleClass","p-button-sm p-button-secondary",3,"onClick"]],template:function(e,i){1&e&&(t.TgZ(0,"c-container",0)(1,"form",1),t.NdJ("ngSubmit",function(){return i.onSubmit()}),t.TgZ(2,"c-row")(3,"c-col")(4,"h6"),t._uU(5,"M\xe3 nh\xf3m v\u1eadt t\u01b0"),t.qZA(),t._UZ(6,"input",2),t.qZA()(),t.TgZ(7,"c-row")(8,"c-col")(9,"h6"),t._uU(10,"T\xean nh\xf3m v\u1eadt t\u01b0"),t.qZA(),t._UZ(11,"input",3),t.qZA()(),t.TgZ(12,"c-row")(13,"c-col")(14,"h6"),t._uU(15,"M\xf4 t\u1ea3"),t.qZA(),t._UZ(16,"input",4),t.qZA()(),t.TgZ(17,"c-row")(18,"c-col"),t._UZ(19,"p-button",5),t.TgZ(20,"p-button",6),t.NdJ("onClick",function(){return i.onCancel()}),t.qZA()()()()()),2&e&&(t.xp6(1),t.Q6J("formGroup",i.form),t.xp6(18),t.Akn(t.DdM(3,z)))},dependencies:[r._Y,r.Fj,r.JJ,r.JL,r.sg,r.u,u.e$z,u.iok,u.Yp0,Z.o,f.zx]}),n})();const K=function(){return{"margin-right":"10px"}};let $=(()=>{class n{constructor(e,i,o,s,a,p,h){this.fb=e,this.messageService=i,this.service=o,this.ref=s,this.config=a,this.router=p,this.store=h,this.form=this.fb.group({name:new r.NI(null),code:new r.NI(null),description:new r.NI(null),lastModifyingUser:new r.NI(null)})}ngOnInit(){this.store.select(A.l).subscribe(e=>{this.form.controls.lastModifyingUser.setValue(e.username)})}onSubmit(){this.form.invalid||this.service.add(this.form.value).subscribe(i=>{1===i.code?(this.messageService.add({key:"toast-item-group-list",severity:"success",summary:"Success",detail:i.msg}),setTimeout(()=>{this.ref.close(!0)},500)):this.messageService.add({key:"toast-item-group-list",severity:"error",summary:"Error",detail:i.msg})})}onCancel(){this.ref.close(!1)}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(r.qu),t.Y36(m.ez),t.Y36(w),t.Y36(d.E7),t.Y36(d.S),t.Y36(_.F0),t.Y36(v.yh))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-item-group-add"]],decls:21,vars:4,consts:[[1,"warp-content"],["id","form","method","post","autocomplete","off",1,"row","g-3",3,"formGroup","ngSubmit"],["type","text","formControlName","code","pInputText","",1,"txt-sm-full"],["type","text","formControlName","name","pInputText","",1,"txt-sm-full"],["type","text","formControlName","description","pInputText","",1,"txt-sm-full"],["type","submit","label","Save","icon","pi pi-check","styleClass","p-button-sm"],["label","Cancel","icon","pi pi-ban","styleClass","p-button-sm p-button-secondary",3,"onClick"]],template:function(e,i){1&e&&(t.TgZ(0,"c-container",0)(1,"form",1),t.NdJ("ngSubmit",function(){return i.onSubmit()}),t.TgZ(2,"c-row")(3,"c-col")(4,"h6"),t._uU(5,"M\xe3 nh\xf3m v\u1eadt t\u01b0"),t.qZA(),t._UZ(6,"input",2),t.qZA()(),t.TgZ(7,"c-row")(8,"c-col")(9,"h6"),t._uU(10,"T\xean nh\xf3m v\u1eadt t\u01b0"),t.qZA(),t._UZ(11,"input",3),t.qZA()(),t.TgZ(12,"c-row")(13,"c-col")(14,"h6"),t._uU(15,"M\xf4 t\u1ea3"),t.qZA(),t._UZ(16,"input",4),t.qZA()(),t.TgZ(17,"c-row")(18,"c-col"),t._UZ(19,"p-button",5),t.TgZ(20,"p-button",6),t.NdJ("onClick",function(){return i.onCancel()}),t.qZA()()()()()),2&e&&(t.xp6(1),t.Q6J("formGroup",i.form),t.xp6(18),t.Akn(t.DdM(3,K)))},dependencies:[r._Y,r.Fj,r.JJ,r.JL,r.sg,r.u,u.e$z,u.iok,u.Yp0,Z.o,f.zx]}),n})();var x=c(2557),E=c(2453),C=c(99),S=c(2137),T=c(3608);const V=["dt1"];function X(n,l){if(1&n){const e=t.EpF();t.TgZ(0,"c-row")(1,"c-col",8)(2,"div",9)(3,"span",10),t._UZ(4,"i",11),t.qZA(),t.TgZ(5,"input",12),t.NdJ("input",function(o){t.CHM(e);const s=t.oxw();return t.KtG(s.applyFilterGlobal(o,"contains"))}),t.qZA()()(),t.TgZ(6,"c-col",13)(7,"p-button",14),t.NdJ("onClick",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.showDialogAdd())}),t.qZA()()()}}function R(n,l){if(1&n){const e=t.EpF();t.TgZ(0,"tr")(1,"th",15),t._uU(2," Stt"),t.qZA(),t.TgZ(3,"th",16),t._UZ(4,"p-sortIcon",17),t._uU(5,"M\xe3 nh\xf3m v\u1eadt t\u01b0 "),t.qZA(),t.TgZ(6,"th",18),t._UZ(7,"p-sortIcon",19),t._uU(8,"T\xean nh\xf3m v\u1eadt t\u01b0 "),t.qZA(),t.TgZ(9,"th",20),t._UZ(10,"p-sortIcon",21),t._uU(11,"M\xf4 t\u1ea3 "),t.qZA(),t.TgZ(12,"th",22),t._UZ(13,"p-sortIcon",23),t._uU(14,"Last modify "),t.qZA(),t.TgZ(15,"th",15),t._uU(16," Ch\u1ec9nh s\u1eeda "),t.TgZ(17,"i",24),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(),s=t.MAs(5);return t.KtG(o.clear(s))}),t.qZA()()()}}function W(n,l){if(1&n){const e=t.EpF();t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.qZA(),t.TgZ(7,"td"),t._uU(8),t.qZA(),t.TgZ(9,"td"),t._uU(10),t.qZA(),t.TgZ(11,"td")(12,"i",25),t.NdJ("click",function(){const s=t.CHM(e).$implicit,a=t.oxw();return t.KtG(a.showDialogEdit(s.code))}),t.qZA(),t.TgZ(13,"i",26),t.NdJ("click",function(){const s=t.CHM(e).$implicit,a=t.oxw();return t.KtG(a.showDialogDelete(s.code))}),t.qZA()()()}if(2&n){const e=l.$implicit,i=l.rowIndex;t.xp6(2),t.Oqu(i+1),t.xp6(2),t.Oqu(e.code),t.xp6(2),t.Oqu(e.name),t.xp6(2),t.Oqu(e.description),t.xp6(2),t.Oqu(e.lastModifyingUser)}}const tt=function(){return{width:"50vw",maxWidth:"500px"}},et=function(){return["code","name","description","lastModifyingUser"]};let it=(()=>{class n{constructor(e,i,o,s,a,p,h){this.service=e,this.fb=i,this.messageService=o,this.location=s,this.confirmService=a,this.commonService=p,this.DialogService=h,this.itemGroupList=[]}ngOnInit(){this.service.getAll().subscribe(e=>{this.itemGroupList=e.data})}clear(e){e?.clear(),this.ngOnInit()}applyFilterGlobal(e,i){this.dt1?.filterGlobal(e.target.value,i)}showDialogEdit(e){this.DialogService.open(j,{data:e,header:"Ch\u1ec9nh s\u1eeda nh\xf3m v\u1eadt t\u01b0",style:{"max-width":"500px",overflow:"none"},contentStyle:{overflow:"unset"},baseZIndex:1e4,closable:!1}).onClose.subscribe(o=>{o&&(this.ngOnInit(),this.clear(this.dt1))})}showDialogDelete(e){this.confirmService.confirm({key:"confirm-delete",message:"B\u1ea1n c\xf3 th\u1eadt s\u1ef1 mu\u1ed1n x\xf3a?",header:"Th\xf4ng b\xe1o",icon:"pi pi-exclamation-triangle",accept:()=>{this.service.delete(e).subscribe(i=>{1===i.code?(this.messageService.add({key:"toast-item-group-list",severity:"success",summary:"Success",detail:i.msg}),this.ngOnInit()):this.messageService.add({key:"toast-item-group-list",severity:"error",summary:"Error",detail:i.msg})})},reject:()=>{}})}showDialogAdd(){this.DialogService.open($,{data:null,header:"Th\xeam nh\xf3m v\u1eadt t\u01b0",style:{"max-width":"500px",overflow:"none"},contentStyle:{overflow:"unset"},baseZIndex:1e4,closable:!1}).onClose.subscribe(i=>{i&&(this.ngOnInit(),this.clear(this.dt1))})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(w),t.Y36(r.qu),t.Y36(m.ez),t.Y36(b.Ye),t.Y36(m.YP),t.Y36(x.v),t.Y36(d.xA))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-item-group-list"]],viewQuery:function(e,i){if(1&e&&t.Gf(V,5),2&e){let o;t.iGM(o=t.CRH())&&(i.dt1=o.first)}},decls:9,vars:7,consts:[[1,"warp-content"],["key","toast-item-group-list"],["key","confirm-delete",3,"baseZIndex"],["dataKey","id","styleClass","p-datatable-sm","responsiveLayout","scroll","breakpoint","1200px",3,"value","globalFilterFields"],["dt1",""],["pTemplate","caption"],["pTemplate","header"],["pTemplate","body"],[1,"d-flex","flex-row-start","align-items-center"],[1,"p-inputgroup",2,"width","60%"],[1,"p-inputgroup-addon"],[1,"pi","pi-search"],["pInputText","","type","text","placeholder","T\xecm ki\u1ebfm...",3,"input"],[1,"d-flex","justify-content-end"],["label","Th\xeam","pTooltip","Th\xeam nh\xf3m v\u1eadt t\u01b0","tooltipPosition","top","icon","pi pi-plus","styleClass","p-button-sm",3,"onClick"],[2,"width","10%"],["pSortableColumn","code",2,"width","15%"],["field","code"],["pSortableColumn","name",2,"width","20%"],["field","name"],["pSortableColumn","description",2,"width","35%"],["field","description"],["pSortableColumn","lastModifyingUser",2,"width","10%"],["field","lastModifyingUser"],["pTooltip","Click to refresh",1,"pi","pi-sync",2,"cursor","pointer",3,"click"],["pTooltip","Ch\u1ec9nh s\u1eeda",1,"pi","pi-user-edit","btn-icon-table","edit",2,"margin-right","8px",3,"click"],["pTooltip","X\xf3a",1,"pi","pi-trash","btn-icon-table","remove",2,"margin-left","8px","margin-right","8px",3,"click"]],template:function(e,i){1&e&&(t.TgZ(0,"c-container",0),t._UZ(1,"p-toast",1)(2,"p-confirmDialog",2),t.TgZ(3,"c-row")(4,"p-table",3,4),t.YNc(6,X,8,0,"ng-template",5),t.YNc(7,R,18,0,"ng-template",6),t.YNc(8,W,14,5,"ng-template",7),t.qZA()()()),2&e&&(t.xp6(2),t.Akn(t.DdM(5,tt)),t.Q6J("baseZIndex",1e4),t.xp6(2),t.Q6J("value",i.itemGroupList)("globalFilterFields",t.DdM(6,et)))},dependencies:[u.e$z,u.iok,u.Yp0,E.FN,m.jx,C.iA,C.lQ,C.fz,Z.o,f.zx,S.Q,T.u]}),n})();var U=c(3471);const nt=function(){return{"margin-right":"10px"}};let ot=(()=>{class n{constructor(e,i,o,s,a,p,h){this.fb=e,this.messageService=i,this.service=o,this.ref=s,this.config=a,this.router=p,this.store=h,this.id=0,this.id=this.config.data,this.service.getOne(this.id).subscribe(g=>{this.form.patchValue(g.data)}),this.form=this.fb.group({name:new r.NI(null),symbol:new r.NI(null),description:new r.NI(null),lastModifyingUser:new r.NI(null),id:new r.NI(null)})}ngOnInit(){this.store.select(A.l).subscribe(e=>{this.form.controls.lastModifyingUser.setValue(e.username),this.form.controls.id.setValue(this.id)})}onSubmit(){this.form.invalid||this.service.update(this.form.value).subscribe(i=>{1===i.code?(this.messageService.add({key:"toast-list",severity:"success",summary:"Success",detail:i.msg}),setTimeout(()=>{this.ref.close(!0)},500)):this.messageService.add({key:"toast-list",severity:"error",summary:"Error",detail:i.msg})})}onCancel(){this.ref.close(!1)}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(r.qu),t.Y36(m.ez),t.Y36(U.l),t.Y36(d.E7),t.Y36(d.S),t.Y36(_.F0),t.Y36(v.yh))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-unit-update"]],decls:21,vars:4,consts:[[1,"warp-content"],["id","form","method","post","autocomplete","off",1,"row","g-3",3,"formGroup","ngSubmit"],["type","text","formControlName","symbol","pInputText","",1,"txt-sm-full"],["type","text","formControlName","name","pInputText","",1,"txt-sm-full"],["type","text","formControlName","description","pInputText","",1,"txt-sm-full"],["type","submit","label","Save","icon","pi pi-check","styleClass","p-button-sm"],["label","Cancel","icon","pi pi-ban","styleClass","p-button-sm p-button-secondary",3,"onClick"]],template:function(e,i){1&e&&(t.TgZ(0,"c-container",0)(1,"form",1),t.NdJ("ngSubmit",function(){return i.onSubmit()}),t.TgZ(2,"c-row")(3,"c-col")(4,"h6"),t._uU(5,"K\xfd hi\u1ec7u"),t.qZA(),t._UZ(6,"input",2),t.qZA()(),t.TgZ(7,"c-row")(8,"c-col")(9,"h6"),t._uU(10,"T\xean \u0111\u01a1n v\u1ecb"),t.qZA(),t._UZ(11,"input",3),t.qZA()(),t.TgZ(12,"c-row")(13,"c-col")(14,"h6"),t._uU(15,"M\xf4 t\u1ea3"),t.qZA(),t._UZ(16,"input",4),t.qZA()(),t.TgZ(17,"c-row")(18,"c-col"),t._UZ(19,"p-button",5),t.TgZ(20,"p-button",6),t.NdJ("onClick",function(){return i.onCancel()}),t.qZA()()()()()),2&e&&(t.xp6(1),t.Q6J("formGroup",i.form),t.xp6(18),t.Akn(t.DdM(3,nt)))},dependencies:[r._Y,r.Fj,r.JJ,r.JL,r.sg,r.u,u.e$z,u.iok,u.Yp0,Z.o,f.zx]}),n})();const st=function(){return{"margin-right":"10px"}};let rt=(()=>{class n{constructor(e,i,o,s,a,p,h){this.fb=e,this.messageService=i,this.service=o,this.ref=s,this.config=a,this.router=p,this.store=h,this.form=this.fb.group({name:new r.NI(null),symbol:new r.NI(null),description:new r.NI(null),lastModifyingUser:new r.NI(null)})}ngOnInit(){this.store.select(A.l).subscribe(e=>{this.form.controls.lastModifyingUser.setValue(e.username)})}onSubmit(){this.form.invalid||this.service.add(this.form.value).subscribe(i=>{1===i.code?(this.messageService.add({key:"toast-list",severity:"success",summary:"Success",detail:i.msg}),setTimeout(()=>{this.ref.close(!0)},500)):this.messageService.add({key:"toast-list",severity:"error",summary:"Error",detail:i.msg})})}onCancel(){this.ref.close(!1)}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(r.qu),t.Y36(m.ez),t.Y36(U.l),t.Y36(d.E7),t.Y36(d.S),t.Y36(_.F0),t.Y36(v.yh))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-unit-add"]],decls:21,vars:4,consts:[[1,"warp-content"],["id","form","method","post","autocomplete","off",1,"row","g-3",3,"formGroup","ngSubmit"],["type","text","formControlName","symbol","pInputText","",1,"txt-sm-full"],["type","text","formControlName","name","pInputText","",1,"txt-sm-full"],["type","text","formControlName","description","pInputText","",1,"txt-sm-full"],["type","submit","label","Save","icon","pi pi-check","styleClass","p-button-sm"],["label","Cancel","icon","pi pi-ban","styleClass","p-button-sm p-button-secondary",3,"onClick"]],template:function(e,i){1&e&&(t.TgZ(0,"c-container",0)(1,"form",1),t.NdJ("ngSubmit",function(){return i.onSubmit()}),t.TgZ(2,"c-row")(3,"c-col")(4,"h6"),t._uU(5,"K\xfd hi\u1ec7u"),t.qZA(),t._UZ(6,"input",2),t.qZA()(),t.TgZ(7,"c-row")(8,"c-col")(9,"h6"),t._uU(10,"T\xean \u0111\u01a1n v\u1ecb"),t.qZA(),t._UZ(11,"input",3),t.qZA()(),t.TgZ(12,"c-row")(13,"c-col")(14,"h6"),t._uU(15,"M\xf4 t\u1ea3"),t.qZA(),t._UZ(16,"input",4),t.qZA()(),t.TgZ(17,"c-row")(18,"c-col"),t._UZ(19,"p-button",5),t.TgZ(20,"p-button",6),t.NdJ("onClick",function(){return i.onCancel()}),t.qZA()()()()()),2&e&&(t.xp6(1),t.Q6J("formGroup",i.form),t.xp6(18),t.Akn(t.DdM(3,st)))},dependencies:[r._Y,r.Fj,r.JJ,r.JL,r.sg,r.u,u.e$z,u.iok,u.Yp0,Z.o,f.zx]}),n})();const lt=["dt1"];function at(n,l){if(1&n){const e=t.EpF();t.TgZ(0,"c-row")(1,"c-col",8)(2,"div",9)(3,"span",10),t._UZ(4,"i",11),t.qZA(),t.TgZ(5,"input",12),t.NdJ("input",function(o){t.CHM(e);const s=t.oxw();return t.KtG(s.applyFilterGlobal(o,"contains"))}),t.qZA()()(),t.TgZ(6,"c-col",13)(7,"p-button",14),t.NdJ("onClick",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.showDialogAdd())}),t.qZA()()()}}function ct(n,l){if(1&n){const e=t.EpF();t.TgZ(0,"tr")(1,"th",15),t._uU(2," Stt"),t.qZA(),t.TgZ(3,"th",16),t._UZ(4,"p-sortIcon",17),t._uU(5,"K\xfd hi\u1ec7u "),t.qZA(),t.TgZ(6,"th",18),t._UZ(7,"p-sortIcon",19),t._uU(8,"T\xean "),t.qZA(),t.TgZ(9,"th",20),t._UZ(10,"p-sortIcon",21),t._uU(11,"M\xf4 t\u1ea3 "),t.qZA(),t.TgZ(12,"th",22),t._UZ(13,"p-sortIcon",23),t._uU(14,"Last modify "),t.qZA(),t.TgZ(15,"th",15),t._uU(16," Ch\u1ec9nh s\u1eeda "),t.TgZ(17,"i",24),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(),s=t.MAs(5);return t.KtG(o.clear(s))}),t.qZA()()()}}function ut(n,l){if(1&n){const e=t.EpF();t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.qZA(),t.TgZ(7,"td"),t._uU(8),t.qZA(),t.TgZ(9,"td"),t._uU(10),t.qZA(),t.TgZ(11,"td")(12,"i",25),t.NdJ("click",function(){const s=t.CHM(e).$implicit,a=t.oxw();return t.KtG(a.showDialogEdit(s.id))}),t.qZA(),t.TgZ(13,"i",26),t.NdJ("click",function(){const s=t.CHM(e).$implicit,a=t.oxw();return t.KtG(a.showDialogDelete(s.id))}),t.qZA()()()}if(2&n){const e=l.$implicit,i=l.rowIndex;t.xp6(2),t.Oqu(i+1),t.xp6(2),t.Oqu(e.symbol),t.xp6(2),t.Oqu(e.name),t.xp6(2),t.Oqu(e.description),t.xp6(2),t.Oqu(e.lastModifyingUser)}}const pt=function(){return{width:"50vw",maxWidth:"500px"}},mt=function(){return["symbol","name","description","lastModifyingUser"]};let dt=(()=>{class n{constructor(e,i,o,s,a){this.service=e,this.messageService=i,this.confirmService=o,this.commonService=s,this.DialogService=a,this.list=[]}ngOnInit(){this.service.getAll().subscribe(e=>{this.list=e.data})}clear(e){e?.clear(),this.ngOnInit()}applyFilterGlobal(e,i){this.dt1?.filterGlobal(e.target.value,i)}showDialogEdit(e){this.DialogService.open(ot,{data:e,header:"Ch\u1ec9nh s\u1eeda \u0111\u01a1n v\u1ecb t\xednh",style:{"max-width":"500px",overflow:"none"},contentStyle:{overflow:"unset"},baseZIndex:1e4,closable:!1}).onClose.subscribe(o=>{o&&(this.ngOnInit(),this.clear(this.dt1))})}showDialogDelete(e){this.confirmService.confirm({key:"confirm-delete",message:"B\u1ea1n c\xf3 th\u1eadt s\u1ef1 mu\u1ed1n x\xf3a?",header:"Th\xf4ng b\xe1o",icon:"pi pi-exclamation-triangle",accept:()=>{this.service.delete(e).subscribe(i=>{1===i.code?(this.messageService.add({key:"toast-item-group-list",severity:"success",summary:"Success",detail:i.msg}),this.ngOnInit()):this.messageService.add({key:"toast-item-group-list",severity:"error",summary:"Error",detail:i.msg})})},reject:()=>{}})}showDialogAdd(){this.DialogService.open(rt,{data:null,header:"Th\xeam \u0111\u01a1n v\u1ecb t\xednh",style:{"max-width":"500px",overflow:"none"},contentStyle:{overflow:"unset"},baseZIndex:1e4,closable:!1}).onClose.subscribe(i=>{i&&(this.ngOnInit(),this.clear(this.dt1))})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(U.l),t.Y36(m.ez),t.Y36(m.YP),t.Y36(x.v),t.Y36(d.xA))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-unit-list"]],viewQuery:function(e,i){if(1&e&&t.Gf(lt,5),2&e){let o;t.iGM(o=t.CRH())&&(i.dt1=o.first)}},decls:9,vars:7,consts:[[1,"warp-content"],["key","toast-list"],["key","confirm-delete",3,"baseZIndex"],["dataKey","id","styleClass","p-datatable-sm","responsiveLayout","scroll","breakpoint","1200px",3,"value","globalFilterFields"],["dt1",""],["pTemplate","caption"],["pTemplate","header"],["pTemplate","body"],[1,"d-flex","flex-row-start","align-items-center"],[1,"p-inputgroup",2,"width","60%"],[1,"p-inputgroup-addon"],[1,"pi","pi-search"],["pInputText","","type","text","placeholder","T\xecm ki\u1ebfm...",3,"input"],[1,"d-flex","justify-content-end"],["label","Th\xeam","pTooltip","Th\xeam nh\xf3m v\u1eadt t\u01b0","tooltipPosition","top","icon","pi pi-plus","styleClass","p-button-sm",3,"onClick"],[2,"width","10%"],["pSortableColumn","symbol",2,"width","15%"],["field","symbol"],["pSortableColumn","name",2,"width","20%"],["field","name"],["pSortableColumn","description",2,"width","35%"],["field","description"],["pSortableColumn","lastModifyingUser",2,"width","10%"],["field","lastModifyingUser"],["pTooltip","Click to refresh",1,"pi","pi-sync",2,"cursor","pointer",3,"click"],["pTooltip","Ch\u1ec9nh s\u1eeda",1,"pi","pi-user-edit","btn-icon-table","edit",2,"margin-right","8px",3,"click"],["pTooltip","X\xf3a",1,"pi","pi-trash","btn-icon-table","remove",2,"margin-left","8px","margin-right","8px",3,"click"]],template:function(e,i){1&e&&(t.TgZ(0,"c-container",0),t._UZ(1,"p-toast",1)(2,"p-confirmDialog",2),t.TgZ(3,"c-row")(4,"p-table",3,4),t.YNc(6,at,8,0,"ng-template",5),t.YNc(7,ct,18,0,"ng-template",6),t.YNc(8,ut,14,5,"ng-template",7),t.qZA()()()),2&e&&(t.xp6(2),t.Akn(t.DdM(5,pt)),t.Q6J("baseZIndex",1e4),t.xp6(2),t.Q6J("value",i.list)("globalFilterFields",t.DdM(6,mt)))},dependencies:[u.e$z,u.iok,u.Yp0,E.FN,m.jx,C.iA,C.lQ,C.fz,Z.o,f.zx,S.Q,T.u]}),n})();var I=c(5439),D=c(8408),N=c(613),k=c(585);const ht=function(){return{"margin-right":"10px"}};let gt=(()=>{class n{constructor(e,i,o,s,a,p,h){this.fb=e,this.messageService=i,this.service=o,this.ref=s,this.config=a,this.router=p,this.commonService=h,this.param="",this.form=this.fb.group({versionName:new r.NI(null),name:new r.NI(null),nameEng:new r.NI(null),description:new r.NI(null),SCDEffectedDate:new r.NI(new Date),SCDExpiredDate:new r.NI(new Date),pricePurchase:new r.NI(null),SCDIsActive:new r.NI(1)}),this.param=this.config.data.versionId+"/"+this.config.data.itemId,this.service.getOne(this.param).subscribe(g=>{g.data&&(g.data.SCDEffectedDate=new Date(g.data.scdEffectedDate),g.data.SCDExpiredDate=new Date(g.data.scdExpiredDate),this.form.patchValue(g.data))})}ngOnInit(){}onSubmit(){if(this.form.invalid)return;let e=this.form.value;e.VersionId=this.config.data.versionId,e.ItemId=this.config.data.itemId,e.SCDEffectedDate=I(e.SCDEffectedDate).format("yyyy-MM-DD").toString(),e.SCDExpiredDate=I(e.SCDExpiredDate).format("yyyy-MM-DD").toString(),this.service.update(e).subscribe(i=>{1===i.code?(this.messageService.add({severity:"success",summary:"Success",detail:i.msg}),setTimeout(()=>{this.ref.close(!0)},500)):this.messageService.add({severity:"error",summary:"Error",detail:i.msg})})}onCancel(){this.ref.close(!1)}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(r.qu),t.Y36(m.ez),t.Y36(D.J),t.Y36(d.E7),t.Y36(d.S),t.Y36(_.F0),t.Y36(x.v))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-item-attribute-update"]],decls:44,vars:11,consts:[[1,"warp-content"],["id","form","method","post","autocomplete","off",1,"row","g-3",3,"formGroup","ngSubmit"],["type","text","formControlName","versionName","readonly","","pInputText","",1,"txt-sm-full",3,"tabIndex"],["type","text","formControlName","name","tabindex","0","pInputText","",1,"txt-sm-full"],["type","text","formControlName","nameEng","tabindex","1","pInputText","",1,"txt-sm-full"],["type","text","formControlName","description","tabindex","2","pInputText","",1,"txt-sm-full"],["formControlName","SCDEffectedDate",3,"dateFormat","tabIndex","className"],["formControlName","SCDExpiredDate",3,"dateFormat","tabindex","className"],[2,"margin-bottom","15px"],["type","text","formControlName","pricePurchase","pInputText","",1,"txt-sm-full"],["formControlName","SCDIsActive","value","0","label","InActive",1,"radio-sm"],["formControlName","SCDIsActive","value","1","label","Active",1,"radio-sm"],["type","submit","label","Save","icon","pi pi-check","styleClass","p-button-sm"],["label","Cancel","icon","pi pi-ban","styleClass","p-button-sm p-button-secondary",3,"onClick"]],template:function(e,i){1&e&&(t.TgZ(0,"c-container",0)(1,"form",1),t.NdJ("ngSubmit",function(){return i.onSubmit()}),t.TgZ(2,"c-row")(3,"c-col")(4,"h6"),t._uU(5,"Phi\xean b\u1ea3n v\u1eadt t\u01b0"),t.qZA(),t._UZ(6,"input",2),t.qZA()(),t.TgZ(7,"c-row")(8,"c-col")(9,"h6"),t._uU(10,"T\xean v\u1eadt t\u01b0"),t.qZA(),t._UZ(11,"input",3),t.qZA(),t.TgZ(12,"c-col")(13,"h6"),t._uU(14,"T\xean ti\u1ebfng Anh"),t.qZA(),t._UZ(15,"input",4),t.qZA()(),t.TgZ(16,"c-row")(17,"c-col")(18,"h6"),t._uU(19,"M\xf4 t\u1ea3"),t.qZA(),t._UZ(20,"input",5),t.qZA()(),t.TgZ(21,"c-row")(22,"c-col")(23,"h6"),t._uU(24,"Hi\u1ec7u l\u1ef1c "),t.qZA(),t._UZ(25,"p-calendar",6),t.qZA(),t.TgZ(26,"c-col")(27,"h6"),t._uU(28,"\u0110\u1ebfn "),t.qZA(),t._UZ(29,"p-calendar",7),t.qZA()(),t.TgZ(30,"c-row",8)(31,"c-col")(32,"h6"),t._uU(33,"Gi\xe1 \u0111\u1eb7t h\xe0ng (tham kh\u1ea3o)"),t.qZA(),t._UZ(34,"input",9),t.qZA(),t.TgZ(35,"c-col")(36,"h6"),t._uU(37,"T\xecnh tr\u1ea1ng"),t.qZA(),t._UZ(38,"p-radioButton",10)(39,"p-radioButton",11),t.qZA()(),t.TgZ(40,"c-row")(41,"c-col"),t._UZ(42,"p-button",12),t.TgZ(43,"p-button",13),t.NdJ("onClick",function(){return i.onCancel()}),t.qZA()()()()()),2&e&&(t.xp6(1),t.Q6J("formGroup",i.form),t.xp6(5),t.Q6J("tabIndex",10),t.xp6(19),t.Q6J("dateFormat","yy/mm/dd")("tabIndex",3)("className","calendar-sm-full"),t.xp6(4),t.Q6J("dateFormat","yy/mm/dd")("tabindex",4)("className","calendar-sm-full"),t.xp6(13),t.Akn(t.DdM(10,ht)))},dependencies:[r._Y,r.Fj,r.JJ,r.JL,r.sg,r.u,u.e$z,u.iok,u.Yp0,Z.o,f.zx,N.EU,k.f]}),n})();const _t=function(){return{"margin-right":"10px"}};let ft=(()=>{class n{constructor(e,i,o,s,a,p){this.fb=e,this.messageService=i,this.service=o,this.ref=s,this.config=a,this.router=p,this.itemId=0,this.form=this.fb.group({name:new r.NI(null),nameEng:new r.NI(null),description:new r.NI(null),SCDEffectedDate:new r.NI(new Date),SCDExpiredDate:new r.NI(new Date),pricePurchase:new r.NI(null),SCDIsActive:new r.NI(1)})}ngOnInit(){this.itemId=this.config.data}onSubmit(){if(this.form.invalid)return;let e=this.form.value;e.itemId=this.itemId,e.SCDEffectedDate=I(e.SCDEffectedDate).format("yyyy-MM-DD").toString(),e.SCDExpiredDate=I(e.SCDExpiredDate).format("yyyy-MM-DD").toString(),this.service.add(e).subscribe(i=>{1===i.code?(this.messageService.add({severity:"success",summary:"Success",detail:i.msg}),setTimeout(()=>{this.ref.close(!0)},500)):this.messageService.add({severity:"error",summary:"Error",detail:i.msg})})}onCancel(){this.ref.close(!1)}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(r.qu),t.Y36(m.ez),t.Y36(D.J),t.Y36(d.E7),t.Y36(d.S),t.Y36(_.F0))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-item-attribute-add"]],decls:39,vars:8,consts:[[1,"warp-content"],["id","form","method","post","autocomplete","off",1,"row","g-3",3,"formGroup","ngSubmit"],["type","text","id","name","formControlName","name","pInputText","",1,"txt-sm-full"],["type","text","id","nameEng","formControlName","nameEng","pInputText","",1,"txt-sm-full"],["type","text","id","description","formControlName","description","pInputText","",1,"txt-sm-full"],["id","scdEffectedDate","formControlName","SCDEffectedDate",3,"dateFormat","className"],["id","scdExpiredDate","formControlName","SCDExpiredDate",3,"dateFormat","className"],[2,"margin-bottom","15px"],["type","text","formControlName","pricePurchase","pInputText","",1,"txt-sm-full"],["formControlName","SCDIsActive","value","0","label","InActive",1,"radio-sm"],["formControlName","SCDIsActive","value","1","label","Active",1,"radio-sm"],["type","submit","label","Save","icon","pi pi-check","styleClass","p-button-sm"],["label","Cancel","icon","pi pi-ban","styleClass","p-button-sm p-button-secondary",3,"onClick"]],template:function(e,i){1&e&&(t.TgZ(0,"c-container",0)(1,"form",1),t.NdJ("ngSubmit",function(){return i.onSubmit()}),t.TgZ(2,"c-row")(3,"c-col")(4,"h6"),t._uU(5,"T\xean v\u1eadt t\u01b0"),t.qZA(),t._UZ(6,"input",2),t.qZA(),t.TgZ(7,"c-col")(8,"h6"),t._uU(9,"T\xean ti\u1ebfng Anh"),t.qZA(),t._UZ(10,"input",3),t.qZA()(),t.TgZ(11,"c-row")(12,"c-col")(13,"h6"),t._uU(14,"M\xf4 t\u1ea3"),t.qZA(),t._UZ(15,"input",4),t.qZA()(),t.TgZ(16,"c-row")(17,"c-col")(18,"h6"),t._uU(19,"Hi\u1ec7u l\u1ef1c "),t.qZA(),t._UZ(20,"p-calendar",5),t.qZA(),t.TgZ(21,"c-col")(22,"h6"),t._uU(23,"\u0110\u1ebfn "),t.qZA(),t._UZ(24,"p-calendar",6),t.qZA()(),t.TgZ(25,"c-row",7)(26,"c-col")(27,"h6"),t._uU(28,"Gi\xe1 \u0111\u1eb7t h\xe0ng (tham kh\u1ea3o)"),t.qZA(),t._UZ(29,"input",8),t.qZA(),t.TgZ(30,"c-col")(31,"h6"),t._uU(32,"T\xecnh tr\u1ea1ng"),t.qZA(),t._UZ(33,"p-radioButton",9)(34,"p-radioButton",10),t.qZA()(),t.TgZ(35,"c-row")(36,"c-col"),t._UZ(37,"p-button",11),t.TgZ(38,"p-button",12),t.NdJ("onClick",function(){return i.onCancel()}),t.qZA()()()()()),2&e&&(t.xp6(1),t.Q6J("formGroup",i.form),t.xp6(19),t.Q6J("dateFormat","yy/mm/dd")("className","calendar-sm-full"),t.xp6(4),t.Q6J("dateFormat","yy/mm/dd")("className","calendar-sm-full"),t.xp6(13),t.Akn(t.DdM(7,_t)))},dependencies:[r._Y,r.Fj,r.JJ,r.JL,r.sg,r.u,u.e$z,u.iok,u.Yp0,Z.o,f.zx,N.EU,k.f],encapsulation:2}),n})();var M=c(7489),q=c(2054);let Ct=(()=>{class n{constructor(e,i){this.api=e,this.router=i}getAll(e){return this.api.get("item-set/"+e)}update(e){return this.api.put("item-set",e)}add(e){return this.api.post("item-set",e)}delete(e,i){return this.api.delete("item-set/"+e+"/"+i)}}return n.\u0275fac=function(e){return new(e||n)(t.LFG(y.O),t.LFG(_.F0))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var Zt=c(5047),bt=c(3054);class P{}class L{static setData(l,e){"string"!=typeof e&&localStorage.setItem(l,JSON.stringify(e))}static getData(l){let e=localStorage.getItem(l);if(e)return JSON.parse(e)}static removeData(l){return localStorage.removeItem(l)}static clearAll(){localStorage.clear()}}var xt=c(7040),G=c(666);function Tt(n,l){if(1&n&&(t.TgZ(0,"div",4)(1,"div"),t._uU(2),t.qZA()()),2&n){const e=t.oxw();t.xp6(2),t.AsE("",e.valueObject.Code," - ",e.valueObject.Name,"")}}function vt(n,l){if(1&n&&(t.TgZ(0,"div",5)(1,"div"),t._uU(2),t.qZA()()),2&n){const e=l.$implicit;t.xp6(2),t.AsE("",e.Code," - ",e.Name,"")}}let At=(()=>{class n{constructor(e,i){this.spinner=e,this.service=i,this.items=[],this.disable=!1,this.onlyItem=!0,this.change=new t.vpe}ngOnInit(){this.initData(),this.valueObject=this.valueToObject()}ngOnChanges(e){this.valueObject=this.valueToObject()}initData(){let e=L.getData("products");if(e){let i=e;this.items=!0===this.onlyItem?i.filter(o=>!1===o.IsBundle):i}else this.spinner.onShow(),this.service.getSelect().toPromise().then(i=>{this.spinner.onHide(),this.items=[],i.data&&i.data.length>0&&(L.setData("products",i.data),this.items=!0===this.onlyItem?i.data.filter(o=>!1===o.IsBundle):i.data)}).catch(i=>{this.spinner.onHide(),console.log(i.message)})}valueToObject(){return this.value&&this.items&&this.items.find(e=>e.Id===this.value)||new P}handleChange(){this.change.emit(this.valueObject.Id)}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(q.V),t.Y36(xt.e))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-item-dropdown"]],inputs:{value:"value",disable:"disable",onlyItem:"onlyItem"},outputs:{change:"change"},features:[t.TTD],decls:4,vars:5,consts:[[1,"item-dropdown-container"],["styleClass","p-drop-item-select-custom","placeholder","Ch\u1ecdn v\u1eadt t\u01b0","optionLabel","Name",3,"baseZIndex","disabled","options","ngModel","showClear","ngModelChange"],["pTemplate","selectedItem"],["pTemplate","item"],[1,"country-item","country-item-value"],[1,"content-item"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0)(1,"p-dropdown",1),t.NdJ("ngModelChange",function(s){return i.valueObject=s})("ngModelChange",function(){return i.handleChange()}),t.YNc(2,Tt,3,2,"ng-template",2),t.YNc(3,vt,3,2,"ng-template",3),t.qZA()()),2&e&&(t.xp6(1),t.Q6J("baseZIndex",1e3)("disabled",i.disable)("options",i.items)("ngModel",i.valueObject)("showClear",!1))},dependencies:[r.JJ,r.On,m.jx,G.Lt],styles:[".item-dropdown-container .p-drop-item-select-custom{width:100%}.item-dropdown-container .p-drop-item-select-custom .p-dropdown-label{padding:.5rem;font-size:13px}.item-dropdown-container .p-input-item-select-custom .p-inputtext{width:100%!important;padding:.438rem}\n"],encapsulation:2}),n})();function It(n,l){if(1&n){const e=t.EpF();t.ynx(0),t.TgZ(1,"tr",10)(2,"td")(3,"span"),t._uU(4),t.qZA()(),t.TgZ(5,"td")(6,"span"),t._uU(7),t.qZA()(),t.TgZ(8,"td")(9,"span"),t._uU(10),t.qZA()(),t.TgZ(11,"td"),t._uU(12),t._UZ(13,"br"),t._uU(14),t.qZA(),t.TgZ(15,"td",11)(16,"i",12),t.NdJ("click",function(){t.CHM(e);const o=t.oxw().$implicit,s=t.oxw();return t.KtG(s.onEdit(o))}),t.qZA(),t.TgZ(17,"i",13),t.NdJ("click",function(){t.CHM(e);const o=t.oxw().$implicit,s=t.oxw();return t.KtG(s.showDialogDelete(o.itemID))}),t.qZA()()(),t.BQk()}if(2&n){const e=t.oxw().$implicit,i=t.oxw();t.xp6(4),t.Oqu(e.itemName),t.xp6(3),t.Oqu(e.quantity),t.xp6(3),t.Oqu(e.note),t.xp6(2),t.hij("",e.lastModifyingUser," "),t.xp6(2),t.hij(" ",i.commonService.strFormatDate(e.lastModifiedDate)," ")}}function yt(n,l){if(1&n&&(t.ynx(0),t._uU(1),t._UZ(2,"br"),t._uU(3),t.BQk()),2&n){const e=t.oxw(2).$implicit,i=t.oxw();t.xp6(1),t.hij(" ",e.lastModifyingUser," "),t.xp6(2),t.hij(" ",i.commonService.strFormatDate(e.lastModifiedDate)," ")}}function wt(n,l){if(1&n){const e=t.EpF();t.ynx(0),t.TgZ(1,"tr",10)(2,"td")(3,"app-item-dropdown",14),t.NdJ("change",function(o){t.CHM(e);const s=t.oxw().$implicit;return t.KtG(s.itemID=o)}),t.qZA()(),t.TgZ(4,"td")(5,"p-inputNumber",15),t.NdJ("ngModelChange",function(o){t.CHM(e);const s=t.oxw().$implicit;return t.KtG(s.quantity=o)}),t.qZA()(),t.TgZ(6,"td")(7,"textarea",16),t.NdJ("ngModelChange",function(o){t.CHM(e);const s=t.oxw().$implicit;return t.KtG(s.note=o)}),t.qZA()(),t.TgZ(8,"td"),t.YNc(9,yt,4,2,"ng-container",9),t.qZA(),t.TgZ(10,"td",11)(11,"i",17),t.NdJ("click",function(){t.CHM(e);const o=t.oxw().$implicit,s=t.oxw();return t.KtG(s.onSubmit(o))}),t.qZA(),t.TgZ(12,"i",18),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(),s=o.$implicit,a=o.index,p=t.oxw();return t.KtG(p.onExit(s,a))}),t.qZA()()(),t.BQk()}if(2&n){const e=t.oxw().$implicit;t.xp6(3),t.Q6J("disable",!e.isNew)("value",e.itemID),t.xp6(2),t.Q6J("ngModel",e.quantity),t.xp6(2),t.Q6J("ngModel",e.note)("rows",1),t.xp6(2),t.Q6J("ngIf",!e.isNew)}}function Et(n,l){if(1&n&&(t.ynx(0),t.YNc(1,It,18,5,"ng-container",9),t.YNc(2,wt,13,6,"ng-container",9),t.BQk()),2&n){const e=l.$implicit;t.xp6(1),t.Q6J("ngIf",!e.isNew&&!e.isModify),t.xp6(1),t.Q6J("ngIf",e.isNew||e.isModify)}}const St=function(){return{"margin-top":"5px","margin-right":"5px"}};let Ut=(()=>{class n{constructor(e,i,o,s,a,p,h,g){this.spinner=e,this.service=i,this.ref=o,this.DialogService=s,this.config=a,this.messageService=p,this.confirmService=h,this.commonService=g,this.basicItems=["1","2","3"],this.itemSETs=[],this.itemSETsBK=[],this.setVersionId=0,this.checked=!1,this.setVersionId=this.config.data}ngOnInit(){this.getData()}addItem(){this.itemSETs.push({isNew:!0,itemID:0,quantity:0,note:null})}onEdit(e){this.itemSETs[this.itemSETs.indexOf(e)].isModify=!0}getData(){this.spinner.onShow(),this.service.getAll(this.setVersionId).toPromise().then(e=>{this.spinner.onHide(),this.itemSETs=[],e&&e.data&&e.data.length>0?(this.itemSETs=M.cloneDeep(e.data),this.itemSETsBK=M.cloneDeep(this.itemSETs)):this.addItem()}).catch(e=>{this.spinner.onHide(),console.log(e.message)})}onSubmit(e){if(e.itemID)if(e.isNew){let i={SetVersionID:this.setVersionId,ItemID:e.itemID,Quantity:e.quantity,Note:e.note};this.spinner.onShow(),this.service.add(i).subscribe(o=>{this.spinner.onHide(),this.getData()},o=>{this.spinner.onHide(),console.log(o.message)})}else{let i={SetVersionID:this.setVersionId,ItemID:e.itemID,Quantity:e.quantity,Note:e.note};this.spinner.onShow(),this.service.update(i).subscribe(o=>{this.spinner.onHide(),this.getData()},o=>{this.spinner.onHide(),console.log(o.message)})}}onCancel(){this.ref.close(!1)}onExit(e,i){if(e.isNew)1===this.itemSETs.length?(this.itemSETs.splice(i,1),this.addItem()):this.itemSETs.splice(i,1);else{let o=this.itemSETsBK.find(s=>s.itemID===e.itemID);this.itemSETs[i]={...o}}}showDialogDelete(e){this.confirmService.confirm({key:"confirm-delete",message:"B\u1ea1n c\xf3 th\u1eadt s\u1ef1 mu\u1ed1n x\xf3a?",header:"Th\xf4ng b\xe1o",icon:"pi pi-exclamation-triangle",accept:()=>{this.service.delete(this.setVersionId,e).subscribe(i=>{1===i.code?(this.getData(),this.messageService.add({severity:"success",summary:"Success",detail:i.msg}),this.ngOnInit()):this.messageService.add({severity:"error",summary:"Error",detail:i.msg})})},reject:()=>{}})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(q.V),t.Y36(Ct),t.Y36(d.E7),t.Y36(d.xA),t.Y36(d.S),t.Y36(m.ez),t.Y36(m.YP),t.Y36(x.v))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-item-set-list"]],decls:22,vars:6,consts:[[1,"item-set-container"],[1,"col-12"],[1,"d-flex","justify-content-end"],["pTooltip","Th\xeam v\u1eadt t\u01b0","tooltipPosition","top","icon","pi pi-plus","styleClass","p-button-rounded p-button-secondary p-button-outlined",1,"p-button-sm","p-button-add-new",3,"click"],[1,"col-12","content-table"],[1,"item-pricing-table"],[3,"width"],[4,"ngFor","ngForOf"],["label","Cancel","icon","pi pi-ban","styleClass","p-button-sm p-button-secondary item-select-btn-cancel",3,"onClick"],[4,"ngIf"],[1,"p-selectable-row"],[1,"col-edit"],["pTooltip","Ch\u1ec9nh s\u1eeda",1,"pi","pi-user-edit","btn-icon-table","edit",2,"margin","auto",3,"click"],["pTooltip","X\xf3a",1,"pi","pi-trash","btn-icon-table","remove",2,"margin","auto",3,"click"],[3,"disable","value","change"],["styleClass","p-input-item-select-custom",3,"ngModel","ngModelChange"],["pInputTextarea","",3,"ngModel","rows","ngModelChange"],[1,"pi","pi-save","btn-icon-table","save",2,"margin","auto",3,"click"],[1,"pi","pi-times","btn-icon-table","exit",2,"margin","auto",3,"click"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0)(1,"c-row",1)(2,"c-col",2)(3,"p-button",3),t.NdJ("click",function(){return i.addItem()}),t.qZA()()(),t.TgZ(4,"c-row",4)(5,"table",5)(6,"thead")(7,"tr")(8,"th",6),t._uU(9,"V\u1eadt t\u01b0"),t.qZA(),t.TgZ(10,"th",6),t._uU(11,"S\u1ed1 l\u01b0\u1ee3ng"),t.qZA(),t.TgZ(12,"th"),t._uU(13,"Ghi ch\xfa"),t.qZA(),t.TgZ(14,"th"),t._uU(15,"Last modify"),t.qZA(),t._UZ(16,"th"),t.qZA()(),t.TgZ(17,"tbody"),t.YNc(18,Et,3,2,"ng-container",7),t.qZA()()(),t.TgZ(19,"c-row")(20,"c-col")(21,"p-button",8),t.NdJ("onClick",function(){return i.onCancel()}),t.qZA()()()()),2&e&&(t.xp6(3),t.Akn(t.DdM(5,St)),t.xp6(5),t.Q6J("width","20%"),t.xp6(2),t.Q6J("width","7%"),t.xp6(8),t.Q6J("ngForOf",i.itemSETs))},dependencies:[b.sg,b.O5,r.Fj,r.JJ,r.On,u.iok,u.Yp0,f.zx,Zt.Rn,T.u,bt.g,At],styles:[".item-set-container{width:100%;height:100%;font-size:13px}.item-set-container .content-table{position:relative;max-height:26rem;height:26rem;overflow-y:auto}.item-set-container .content-table .item-pricing-table{height:-moz-fit-content;height:fit-content;width:100%;table-layout:auto;position:relative;overflow-y:auto;border:1px solid #f1f1f1}.item-set-container .content-table .item-pricing-table tr{border-bottom:1px solid #f1f1f1}.item-set-container .content-table .item-pricing-table th,.item-set-container .content-table .item-pricing-table td{padding:.5rem .5rem .5rem 1rem;height:100%;margin:0;border:none}.item-set-container .content-table .item-pricing-table th:not(:last-child),.item-set-container .content-table .item-pricing-table tr:not(:last-child){border-right:1px solid #f1f1f1}.item-set-container .content-table .item-pricing-table thead tr th{background-color:#f8f9fa;position:sticky;z-index:9999;top:-1px}.item-set-container .content-table .item-pricing-table .col-edit{display:flex}.item-set-container .content-table .item-pricing-table .col-edit i{margin:auto}.item-set-container .p-drop-itme-select-custom{width:100%}.item-set-container .p-drop-itme-select-custom .p-dropdown-label{padding:.5rem;font-size:13px}.item-set-container .p-input-item-select-custom .p-inputtext{width:100%!important;padding:.438rem}.item-set-container .p-inputtextarea{width:100%;padding:.438rem}.item-set-container .save{color:#1e90ff}.item-set-container .exit{color:red}.item-set-container .item-select-btn-cancel{position:absolute;bottom:35px;right:37px}\n"],encapsulation:2}),n})();const Dt=["dt1"],Nt=function(){return{"margin-top":"5px","margin-right":"5px"}};function qt(n,l){if(1&n){const e=t.EpF();t.TgZ(0,"c-row")(1,"c-col",6)(2,"div",7)(3,"span",8),t._UZ(4,"i",9),t.qZA(),t.TgZ(5,"input",10),t.NdJ("input",function(o){t.CHM(e);const s=t.oxw();return t.KtG(s.applyFilterGlobal(o,"contains"))}),t.qZA()()(),t.TgZ(6,"c-col",11)(7,"p-button",12),t.NdJ("onClick",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.showDialogAdd())}),t.qZA()()()}2&n&&(t.xp6(7),t.Akn(t.DdM(2,Nt)))}function Ft(n,l){if(1&n){const e=t.EpF();t.TgZ(0,"tr")(1,"th",13),t._uU(2," Stt"),t.qZA(),t.TgZ(3,"th",14),t._UZ(4,"p-sortIcon",15),t._uU(5,"Phi\xean b\u1ea3n "),t.qZA(),t.TgZ(6,"th",16),t._UZ(7,"p-sortIcon",17),t._uU(8,"T\xean s\u1ea3n ph\u1ea9m "),t.qZA(),t.TgZ(9,"th",18),t._UZ(10,"p-sortIcon",19),t._uU(11,"T\xean ti\u1ebfng Anh "),t.qZA(),t.TgZ(12,"th",20),t._UZ(13,"p-sortIcon",21),t._uU(14,"M\xf4 t\u1ea3 "),t.qZA(),t.TgZ(15,"th",22),t._UZ(16,"p-sortIcon"),t._uU(17,"Ng\xe0y hi\u1ec7u l\u1ef1c "),t.qZA(),t.TgZ(18,"th",23),t._UZ(19,"p-sortIcon",24),t._uU(20,"Gi\xe1 \u0111\u1eb7t h\xe0ng (tham kh\u1ea3o) "),t.qZA(),t.TgZ(21,"th",25),t._UZ(22,"p-sortIcon",26),t._uU(23,"T\xecnh tr\u1ea1ng "),t.qZA(),t.TgZ(24,"th",27),t._uU(25," Ch\u1ec9nh s\u1eeda "),t.TgZ(26,"i",28),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(),s=t.MAs(3);return t.KtG(o.clear(s))}),t.qZA()()()}}function Yt(n,l){if(1&n){const e=t.EpF();t.TgZ(0,"i",32),t.NdJ("click",function(){t.CHM(e);const o=t.oxw().$implicit,s=t.oxw();return t.KtG(s.showDialogItem(o.versionId))}),t.qZA()}}function kt(n,l){if(1&n){const e=t.EpF();t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.qZA(),t.TgZ(7,"td"),t._uU(8),t.qZA(),t.TgZ(9,"td"),t._uU(10),t.qZA(),t.TgZ(11,"td"),t._uU(12),t.qZA(),t.TgZ(13,"td"),t._uU(14),t.qZA(),t.TgZ(15,"td"),t._uU(16),t.qZA(),t.TgZ(17,"td")(18,"i",29),t.NdJ("click",function(){const s=t.CHM(e).$implicit,a=t.oxw();return t.KtG(a.showDialogEdit(s.versionId,s.itemId))}),t.qZA(),t.TgZ(19,"i",30),t.NdJ("click",function(){const s=t.CHM(e).$implicit,a=t.oxw();return t.KtG(a.showDialogDelete(s.versionId,s.itemId))}),t.qZA(),t.YNc(20,Yt,1,0,"i",31),t.qZA()()}if(2&n){const e=l.$implicit,i=l.rowIndex,o=t.oxw();t.xp6(2),t.Oqu(i+1),t.xp6(2),t.Oqu(e.versionName),t.xp6(2),t.Oqu(e.name),t.xp6(2),t.Oqu(e.nameEng),t.xp6(2),t.Oqu(e.description),t.xp6(2),t.Oqu(o.commonService.strFormatDate(e.scdEffectedDate,"DD/MM/YYY")+" - "+o.commonService.strFormatDate(e.scdExpiredDate,"DD/MM/YYYY")),t.xp6(2),t.Oqu(e.pricePurchase),t.xp6(2),t.Oqu(1===e.scdIsActive?"Active":"InActive"),t.xp6(4),t.Q6J("ngIf",o.isBundle)}}const Mt=function(){return["name","nameEng","description","versionName","scdIsActive"]};let Pt=(()=>{class n{constructor(e,i,o,s,a,p,h){this.service=e,this.messageService=i,this.confirmService=o,this.commonService=s,this.DialogService=a,this.ref=p,this.config=h,this.list=[],this.itemId=0,this.isBundle=!1,this.itemId=this.config.data.id,this.isBundle=this.config.data.isBundle}ngOnInit(){this.service.getByItemId(this.itemId).subscribe(e=>{this.list=e.data})}clear(e){e?.clear(),this.ngOnInit()}applyFilterGlobal(e,i){this.dt1?.filterGlobal(e.target.value,i)}showDialogEdit(e,i){this.DialogService.open(gt,{data:{versionId:e,itemId:i},header:"Ch\u1ec9nh s\u1eeda phi\xean b\u1ea3n v\u1eadt t\u01b0",style:{"max-width":"700px",overflow:"none"},contentStyle:{overflow:"unset"},baseZIndex:1e4,closable:!1}).onClose.subscribe(s=>{s&&(this.ngOnInit(),this.clear(this.dt1))}),this.ref.close()}showDialogDelete(e,i){this.confirmService.confirm({key:"confirm-delete",message:"B\u1ea1n c\xf3 th\u1eadt s\u1ef1 mu\u1ed1n x\xf3a?",header:"Th\xf4ng b\xe1o",icon:"pi pi-exclamation-triangle",accept:()=>{this.service.delete(e+"/"+i).subscribe(o=>{1===o.code?(this.messageService.add({severity:"success",summary:"Success",detail:o.msg}),this.ngOnInit()):this.messageService.add({severity:"error",summary:"Error",detail:o.msg})})},reject:()=>{}})}showDialogAdd(){this.DialogService.open(ft,{data:this.itemId,header:"Th\xeam phi\xean b\u1ea3n v\u1eadt t\u01b0",style:{"max-width":"700px",overflow:"none"},contentStyle:{overflow:"unset"},baseZIndex:1e4,closable:!1}).onClose.subscribe(i=>{i&&(this.ngOnInit(),this.clear(this.dt1))}),this.ref.close()}showDialogItem(e){this.DialogService.open(Ut,{data:e,header:"Danh s\xe1ch v\u1eadt t\u01b0 \xe1p d\u1ee5ng",style:{"max-width":"1200px",overflow:"none",width:"1200px",height:"650px","max-height":"650px"},contentStyle:{overflow:"unset"},baseZIndex:1e4,closable:!0}).onClose.subscribe(o=>{o&&this.ngOnInit()})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(D.J),t.Y36(m.ez),t.Y36(m.YP),t.Y36(x.v),t.Y36(d.xA),t.Y36(d.E7),t.Y36(d.S))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-item-attribute-list"]],viewQuery:function(e,i){if(1&e&&t.Gf(Dt,5),2&e){let o;t.iGM(o=t.CRH())&&(i.dt1=o.first)}},decls:7,vars:3,consts:[[1,"warp-content"],["styleClass","p-datatable-sm","responsiveLayout","scroll","breakpoint","1200px",3,"value","globalFilterFields"],["dt1",""],["pTemplate","caption"],["pTemplate","header"],["pTemplate","body"],[1,"d-flex","flex-row-start","align-items-center"],[1,"p-inputgroup",2,"width","60%"],[1,"p-inputgroup-addon"],[1,"pi","pi-search"],["pInputText","","type","text","placeholder","T\xecm ki\u1ebfm...",3,"input"],[1,"d-flex","justify-content-end"],["pTooltip","Th\xeam m\u1edbi","tooltipPosition","top","icon","pi pi-plus","styleClass","p-button-rounded p-button-secondary p-button-outlined",1,"p-button-sm","p-button-add-new",3,"onClick"],[2,"width","4%"],["pSortableColumn","versionName",2,"width","10%"],["field","versionName"],["pSortableColumn","name",2,"width","10%"],["field","name"],["pSortableColumn","nameEng",2,"width","10%"],["field","nameEng"],["pSortableColumn","description",2,"width","22%"],["field","description"],[2,"width","15%"],["pSortableColumn","pricePurchase",2,"width","10%"],["field","pricePurchase"],["pSortableColumn","scdIsActive",2,"width","10%"],["field","scdIsActive"],[2,"width","8%"],["pTooltip","Click to refresh",1,"pi","pi-sync",2,"cursor","pointer",3,"click"],["pTooltip","Ch\u1ec9nh s\u1eeda",1,"pi","pi-user-edit","btn-icon-table","edit",2,"margin-right","8px",3,"click"],["pTooltip","X\xf3a",1,"pi","pi-trash","btn-icon-table","remove",2,"margin-left","8px","margin-right","8px",3,"click"],["class","pi pi-th-large btn-icon-table detail","pTooltip","chi ti\u1ebft SET","style","margin-left: 8px;margin-right: 8px;",3,"click",4,"ngIf"],["pTooltip","chi ti\u1ebft SET",1,"pi","pi-th-large","btn-icon-table","detail",2,"margin-left","8px","margin-right","8px",3,"click"]],template:function(e,i){1&e&&(t.TgZ(0,"c-container",0)(1,"c-row")(2,"p-table",1,2),t.YNc(4,qt,8,3,"ng-template",3),t.YNc(5,Ft,27,0,"ng-template",4),t.YNc(6,kt,21,9,"ng-template",5),t.qZA()()()),2&e&&(t.xp6(2),t.Q6J("value",i.list)("globalFilterFields",t.DdM(2,Mt)))},dependencies:[b.O5,u.e$z,u.iok,u.Yp0,m.jx,C.iA,C.lQ,C.fz,Z.o,f.zx,T.u]}),n})();var B=c(5861),Lt=c(529),Jt=c(2340);let O=(()=>{class n{constructor(e,i){this.api=e,this.router=i}getSelect(){return this.api.get("Product")}getAll(){return this.api.get("Product/get-all")}getOne(e){return this.api.get("Product/get-by-id/"+e)}update(e){return this.api.put("Product",e)}add(e){return this.api.post("Product",e)}delete(e){return this.api.delete("Product/"+e)}}return n.\u0275fac=function(e){return new(e||n)(t.LFG(y.O),t.LFG(_.F0))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var Gt=c(2895),Bt=c(6919),Ot=c(5054);const Qt=["uploadImg"];function Ht(n,l){1&n&&(t.TgZ(0,"div",26),t._uU(1," B\u1eaft bu\u1ed9c nh\u1eadp "),t.qZA())}function zt(n,l){1&n&&(t.TgZ(0,"div",26),t._uU(1," B\u1eaft bu\u1ed9c nh\u1eadp "),t.qZA())}function jt(n,l){1&n&&(t.TgZ(0,"c-col")(1,"h6"),t._uU(2,"Ph\xe2n lo\u1ea1i SET"),t.qZA(),t.TgZ(3,"div",27),t._UZ(4,"p-radioButton",28)(5,"div",29)(6,"p-radioButton",30),t.qZA()())}function Kt(n,l){1&n&&t.GkF(0)}function $t(n,l){if(1&n&&(t.TgZ(0,"div",46)(1,"div"),t._uU(2),t.qZA()()),2&n){const e=t.oxw().$implicit;t.xp6(2),t.Oqu(e.ProductCode)}}function Vt(n,l){if(1&n&&(t.TgZ(0,"div",46)(1,"div"),t._uU(2),t.qZA()()),2&n){const e=t.oxw().$implicit;t.xp6(2),t.AsE("",e.ProductCode," - ",e.ProductName,"")}}function Xt(n,l){if(1&n&&(t.YNc(0,$t,3,1,"div",45),t.YNc(1,Vt,3,2,"div",45)),2&n){const e=l.$implicit;t.Q6J("ngIf",null===e.ProductLineId),t.xp6(1),t.Q6J("ngIf",null!==e.ProductLineId)}}function Rt(n,l){1&n&&(t.TgZ(0,"div",26),t._uU(1," V\u1eadt t\u01b0 \u0111\xe3 \u0111\u01b0\u1ee3c ch\u1ecdn "),t.qZA())}function Wt(n,l){1&n&&(t.TgZ(0,"div",26),t._uU(1," Kh\xf4ng th\u1ec3 hi\u1ec3n th\u1ecb "),t.qZA())}function te(n,l){1&n&&(t.TgZ(0,"div",26),t._uU(1," Kh\xf4ng th\u1ec3 hi\u1ec3n th\u1ecb "),t.qZA())}function ee(n,l){if(1&n){const e=t.EpF();t.ynx(0),t.TgZ(1,"tr")(2,"td"),t._uU(3),t.qZA(),t.TgZ(4,"td")(5,"p-dropdown",41),t.NdJ("onChange",function(o){const a=t.CHM(e).$implicit,p=t.oxw(2);return t.KtG(p.handleChangeSelectProduct(o,a))}),t.YNc(6,Xt,2,2,"ng-template",42),t.qZA(),t.YNc(7,Rt,2,0,"div",6),t.qZA(),t.TgZ(8,"td"),t._uU(9),t.YNc(10,Wt,2,0,"div",6),t.qZA(),t.TgZ(11,"td"),t._uU(12),t.YNc(13,te,2,0,"div",6),t.qZA(),t.TgZ(14,"td")(15,"input",43),t.NdJ("ngModelChange",function(o){const a=t.CHM(e).$implicit;return t.KtG(a.Qty=o)}),t.qZA()(),t.TgZ(16,"td")(17,"div")(18,"i",44),t.NdJ("click",function(){const s=t.CHM(e).index,a=t.oxw(2);return t.KtG(a.onDeleteDetail(s))}),t.qZA()()()(),t.BQk()}if(2&n){const e=l.$implicit,i=l.index,o=t.oxw(2);t.xp6(3),t.Oqu(i+1),t.xp6(2),t.Q6J("options",o.listProduct)("autoDisplayFirst",!0)("ngModel",e.ProductLineId),t.xp6(2),t.Q6J("ngIf",e.Dublicate),t.xp6(2),t.hij("",e.ProductName," "),t.xp6(1),t.Q6J("ngIf",e.Dublicate),t.xp6(2),t.hij("",e.Detail," "),t.xp6(1),t.Q6J("ngIf",e.Dublicate),t.xp6(2),t.Q6J("disabled",e.Dublicate)("ngModel",e.Qty)}}function ie(n,l){if(1&n){const e=t.EpF();t.TgZ(0,"c-row"),t._UZ(1,"div",31),t.qZA(),t.TgZ(2,"c-row")(3,"span"),t._uU(4,"Th\xf4ng tin chi ti\u1ebft v\u1eadt t\u01b0 trong SET"),t.qZA()(),t.TgZ(5,"c-row")(6,"table",32)(7,"thead")(8,"tr")(9,"th",33),t._uU(10,"STT"),t.qZA(),t.TgZ(11,"th",34),t._uU(12,"M\xe3 v\u1eadt t\u01b0"),t.qZA(),t.TgZ(13,"th",34),t._uU(14,"T\xean v\u1eadt t\u01b0"),t.qZA(),t.TgZ(15,"th",35),t._uU(16,"Chi ti\u1ebft v\u1eadt t\u01b0"),t.qZA(),t.TgZ(17,"th",36),t._uU(18,"S\u1ed1 l\u01b0\u1ee3ng"),t.qZA(),t.TgZ(19,"th",37)(20,"div",38)(21,"p-button",39),t.NdJ("onClick",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.onCreateNewSetDetail())}),t.qZA()()()()(),t.TgZ(22,"tbody"),t.YNc(23,ee,19,11,"ng-container",40),t.qZA()()()}if(2&n){const e=t.oxw();t.xp6(23),t.Q6J("ngForOf",e.setDetailList)}}const F=function(){return{width:"auto","max-height":"250px",border:"1px solid black"}},ne=function(){return{"margin-right":"10px"}};let Q=(()=>{class n{constructor(e,i,o,s,a,p,h,g,fe,Ce){this.fb=e,this.messageService=i,this.service=o,this.ref=s,this.config=a,this.router=p,this.store=h,this.uploadFileService=g,this.spinner=fe,this.cdr=Ce,this.listItemGroup=[],this.listProductType=[{id:0,name:"V\u1eadt t\u01b0 l\u1ebb"},{id:1,name:"SET"}],this.listProduct=[],this.setDetailList=[],this.Id=null,this.listFiles=[],this.urlImage1="",this.urlImage2="",this.urlImage3="",this.rootImg="../../../assets/img/avatars/default_avatar.png",this.isSubmit=!1,this.setError=!1,this.urlImage1=this.rootImg,this.urlImage2=this.rootImg,this.urlImage3=this.rootImg;const H=this.config.data;this.form=this.fb.group({id:new r.NI(-1),productCode:new r.NI(null,[r.kI.required]),productName:new r.NI(null,[r.kI.required]),productNameEN:new r.NI(null),detail:new r.NI(null),detailVehicle:new r.NI(null),productGroup:new r.NI(null),brandName:new r.NI(null),basePrice:new r.NI(0),productType:new r.NI(0),userName:new r.NI(null),sETType:new r.NI(0),img1:new r.NI(null),img2:new r.NI(null),img3:new r.NI(null)}),H&&(this.Id=H,this.getData(this.Id))}get apiUrl(){return Jt.N.apiUrl}ngOnInit(){this.getProductList()}getProductList(){var e=this;return(0,B.Z)(function*(){e.spinner.onShow(),yield e.service.getSelect().subscribe(i=>{e.spinner.onHide(),e.listProduct=i.data.map(o=>({ProductLineId:o.id,ProductCode:o.productCode,ProductName:o.productName,Detail:o.detail})),e.listProduct.unshift({ProductLineId:null,ProductCode:"Ch\u1ecdn v\u1eadt t\u01b0",ProductName:"",Detail:""})},i=>{e.spinner.onHide(),console.log(i)})})()}getData(e){var i=this;return(0,B.Z)(function*(){i.spinner.onShow(),yield i.service.getOne(e).subscribe(o=>{i.spinner.onHide(),o.data&&(i.form.patchValue(o.data),i.urlImage1=i.form.controls.img1.value&&""!==i.form.controls.img1.value?i.apiUrl+"/Files/"+i.form.controls.img1.value:i.rootImg,i.urlImage2=i.form.controls.img2.value&&""!==i.form.controls.img2.value?i.apiUrl+"/Files/"+i.form.controls.img2.value:i.rootImg,i.urlImage3=i.form.controls.img3.value&&""!==i.form.controls.img3.value?i.apiUrl+"/Files/"+i.form.controls.img3.value:i.rootImg),o.data.setDetail&&o.data.setDetail.length>0&&(i.setDetailList=[],i.setDetailList=o.data.setDetail.map(s=>({ProductLineId:s.productLineId,ProductId:s.productId,ProductCode:s.productCode,ProductName:s.productName,Detail:s.detail,Qty:s.qty,IsEdit:!0,Dublicate:!1}))),i.cdr.detectChanges()},o=>{i.spinner.onHide(),console.error(o)})})()}onHandleChangeProductType(e){1===e.value?(0===this.setDetailList.length&&this.onCreateNewSetDetail(),this.form.controls.basePrice.setValue(0)):this.form.controls.sETType.setValue(null)}onCreateNewSetDetail(){this.setDetailList.push({ProductLineId:null,ProductId:null,ProductCode:null,ProductName:null,Detail:null,Qty:0,IsEdit:!0,Dublicate:!1})}onSubmit(){if(this.isSubmit=!0,!this.form.invalid)if(this.listFiles.length>0){const e=this,i=new FormData;this.listFiles.forEach((o,s)=>{i.append("file"+s,o.formData.get("file"))}),this.uploadFileService.upload(i).subscribe({next:o=>{o.type===Lt.dt.Response&&1===o.body.code&&this.listFiles.forEach((s,a)=>{1===s.position?this.form.controls.img1.setValue(o.body.data[a]):2===s.position?this.form.controls.img2.setValue(o.body.data[a]):this.form.controls.img3.setValue(o.body.data[a])})},error:o=>console.log(o),complete(){e.onSave()}})}else this.onSave()}onSave(){1===this.setDetailList.length&&null===this.setDetailList[0].productLineId&&(this.setDetailList=[]);let e=this.form.value;e.SETType=0===e.ProductType?null:e.SETType,e.SetDetail=0===e.ProductType?null:this.setDetailList,this.Id?(e.Id=this.Id,this.service.update(e).subscribe(i=>{1===i.code?(this.isSubmit=!1,this.messageService.add({severity:"success",summary:"Success",detail:i.msg}),setTimeout(()=>{this.ref.close(!0)},500)):this.messageService.add({severity:"error",summary:"Error",detail:i.msg})})):this.service.add(e).subscribe(i=>{1===i.code?(this.isSubmit=!1,this.messageService.add({severity:"success",summary:"Success",detail:i.msg}),setTimeout(()=>{this.ref.close(!0)},500)):this.messageService.add({severity:"error",summary:"Error",detail:i.msg})})}handleChangeSelectProduct(e,i){i.Dublicate=!1,this.setError=!1;const o=this.listProduct.find(p=>p.ProductLineId===e.value);let s=0;if(this.setDetailList.forEach(p=>{p.ProductLineId===e.value&&(s+=1)}),o){if(s>=1)return i.Dublicate=!0,i.productLineId=null,i.ProductCode=null,i.ProductName=null,i.Detail=null,void(this.setError=!0);i.ProductLineId=o.ProductLineId,i.ProductCode=o.ProductCode,i.ProductName=o.ProductName,i.Detail=o.Detail}}onDeleteDetail(e){this.setDetailList.splice(e,1),0===this.setDetailList.length&&(this.onCreateNewSetDetail(),this.setDetailList=[])}onSelectFile(e,i){for(let a=0;a<e.length;a++){const p=e[a],h=new FormData;h.append("file",p),this.listFiles.push({position:i,formData:h})}var s=new FileReader;s.readAsDataURL(e[0]),s.onload=a=>{1===i?this.urlImage1=s.result?s.result.toString():"":2===i?this.urlImage2=s.result?s.result.toString():"":this.urlImage3=s.result?s.result.toString():""}}onCancelUpload(e){this.listFiles=this.listFiles.filter(i=>i.position!==e),1===e?this.urlImage1=this.rootImg:2===e?this.urlImage2=this.rootImg:this.urlImage3=this.rootImg}onCancel(){this.ref.close(!1)}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(r.qu),t.Y36(m.ez),t.Y36(O),t.Y36(d.E7),t.Y36(d.S),t.Y36(_.F0),t.Y36(v.yh),t.Y36(Gt.f),t.Y36(q.V),t.Y36(t.sBO))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-product-form"]],viewQuery:function(e,i){if(1&e&&t.Gf(Qt,5),2&e){let o;t.iGM(o=t.CRH())&&(i.elUpload=o.first)}},decls:78,vars:48,consts:[[1,"warp-content"],["id","form","method","post","autocomplete","off",1,"row","g-3",3,"formGroup","ngSubmit"],[1,"cus-content-dialog"],[3,"xxl"],[1,"required"],["type","text","formControlName","productCode","pInputText","",1,"txt-sm-full"],["class","invalid-feedback",4,"ngIf"],["type","text","formControlName","productName","pInputText","",1,"txt-sm-full"],["type","text","formControlName","productNameEN","pInputText","",1,"txt-sm-full"],["type","text","formControlName","detail","pInputText","",1,"txt-sm-full"],["type","text","formControlName","detailVehicle","pInputText","",1,"txt-sm-full"],["type","text","formControlName","productGroup","pInputText","",1,"txt-sm-full"],["type","text","formControlName","brandName","pInputText","",1,"txt-sm-full"],["type","text","formControlName","basePrice","pInputText","",1,"txt-sm-full",3,"disabled"],["xxl","6"],["formControlName","productType","optionValue","id","optionLabel","name",1,"dropdown-sm-full",3,"options","autoDisplayFirst","onChange"],[4,"ngIf"],["xxl","4"],["accept","image/*",1,"upload-avatar",3,"multiple","customUpload","chooseStyleClass","cancelStyleClass","showUploadButton","maxFileSize","onSelect","onClear"],["uploadImg",""],["alt","Image",3,"src","imageStyle","preview"],[4,"ngIf","ngIfElse"],[1,"action-group"],["type","submit","label","Save","icon","pi pi-check","styleClass","p-button-sm",3,"disabled"],["label","Cancel","icon","pi pi-ban","styleClass","p-button-sm p-button-secondary",3,"onClick"],["SetDetail",""],[1,"invalid-feedback"],[2,"display","flex"],["formControlName","sETType","value","0","label","Normal",1,"radio-sm"],[2,"width","7rem"],["formControlName","sETType","value","1","label","Fixed",1,"radio-sm"],[1,"dat-line"],[1,"table","custom-table"],["scope","col","width","7%"],["scope","col","width","25%"],["scope","col","width","30%"],["scope","col","width","10%"],["scope","col",2,"display","flex"],[2,"margin","auto","margin-right","0"],["pTooltip","Th\xeam v\u1eadt t\u01b0 cho SET","tooltipPosition","top","icon","pi pi-plus","styleClass","p-button-rounded p-button-secondary p-button-outlined",1,"p-button-sm","p-button-add-new",3,"onClick"],[4,"ngFor","ngForOf"],["optionValue","ProductLineId","optionLabel","ProductCode",1,"dropdown-sm-full",3,"options","autoDisplayFirst","ngModel","onChange"],["pTemplate","item"],["type","text","pInputText","",1,"txt-sm-full",3,"disabled","ngModel","ngModelChange"],["pTooltip","X\xf3a",1,"pi","pi-trash","btn-icon-table","remove",2,"margin-left","8px","margin-right","8px",3,"click"],["class","content-item",4,"ngIf"],[1,"content-item"]],template:function(e,i){if(1&e&&(t.TgZ(0,"c-container",0)(1,"form",1),t.NdJ("ngSubmit",function(){return i.onSubmit()}),t.TgZ(2,"c-row",2)(3,"c-row")(4,"c-col",3)(5,"h6"),t._uU(6,"M\xe3 v\u1eadt t\u01b0 "),t._UZ(7,"span",4),t.qZA(),t._UZ(8,"input",5),t.YNc(9,Ht,2,0,"div",6),t.qZA()(),t.TgZ(10,"c-row")(11,"c-col")(12,"h6"),t._uU(13,"T\xean v\u1eadt t\u01b0 VN "),t._UZ(14,"span",4),t.qZA(),t._UZ(15,"input",7),t.YNc(16,zt,2,0,"div",6),t.qZA(),t.TgZ(17,"c-col")(18,"h6"),t._uU(19,"T\xean ti\u1ebfng EN"),t.qZA(),t._UZ(20,"input",8),t.qZA()(),t.TgZ(21,"c-row")(22,"c-col")(23,"h6"),t._uU(24,"Chi ti\u1ebft v\u1eadt t\u01b0"),t.qZA(),t._UZ(25,"input",9),t.qZA()(),t.TgZ(26,"c-row")(27,"c-col")(28,"h6"),t._uU(29,"Chi ti\u1ebft xe"),t.qZA(),t._UZ(30,"input",10),t.qZA()(),t.TgZ(31,"c-row")(32,"c-col")(33,"h6"),t._uU(34,"Nh\xf3m v\u1eadt t\u01b0"),t.qZA(),t._UZ(35,"input",11),t.qZA(),t.TgZ(36,"c-col")(37,"h6"),t._uU(38,"Branch name"),t.qZA(),t._UZ(39,"input",12),t.qZA()(),t.TgZ(40,"c-row")(41,"c-col")(42,"h6"),t._uU(43,"\u0110\u01a1n gi\xe1 t\u1ea1m VN"),t.qZA(),t._UZ(44,"input",13),t.qZA(),t._UZ(45,"c-col"),t.qZA(),t.TgZ(46,"c-row")(47,"c-col",14)(48,"h6"),t._uU(49,"Ph\xe2n lo\u1ea1i v\u1eadt"),t.qZA(),t.TgZ(50,"p-dropdown",15),t.NdJ("onChange",function(s){return i.onHandleChangeProductType(s)}),t.qZA()(),t.YNc(51,jt,7,0,"c-col",16),t.qZA(),t.TgZ(52,"c-row")(53,"c-col",17)(54,"h6"),t._uU(55,"H\xecnh \u1ea3nh 1"),t.qZA(),t.TgZ(56,"p-fileUpload",18,19),t.NdJ("onSelect",function(s){return i.onSelectFile(s.files,1)})("onClear",function(){return i.onCancelUpload(1)}),t.qZA(),t._UZ(58,"p-image",20),t.qZA(),t.TgZ(59,"c-col",17)(60,"h6"),t._uU(61,"H\xecnh \u1ea3nh 2"),t.qZA(),t.TgZ(62,"p-fileUpload",18,19),t.NdJ("onSelect",function(s){return i.onSelectFile(s.files,2)})("onClear",function(){return i.onCancelUpload(2)}),t.qZA(),t._UZ(64,"p-image",20),t.qZA(),t.TgZ(65,"c-col",17)(66,"h6"),t._uU(67,"H\xecnh \u1ea3nh 3"),t.qZA(),t.TgZ(68,"p-fileUpload",18,19),t.NdJ("onSelect",function(s){return i.onSelectFile(s.files,3)})("onClear",function(){return i.onCancelUpload(3)}),t.qZA(),t._UZ(70,"p-image",20),t.qZA()(),t.YNc(71,Kt,1,0,"ng-container",21),t.qZA(),t.TgZ(72,"c-row",22)(73,"c-col"),t._UZ(74,"p-button",23),t.TgZ(75,"p-button",24),t.NdJ("onClick",function(){return i.onCancel()}),t.qZA()()()()(),t.YNc(76,ie,24,1,"ng-template",null,25,t.W1O)),2&e){const o=t.MAs(77);t.xp6(1),t.Q6J("formGroup",i.form),t.xp6(3),t.Q6J("xxl",4),t.xp6(4),t.ekj("input-invalid",i.isSubmit&&i.form.controls.productCode.errors),t.xp6(1),t.Q6J("ngIf",i.isSubmit&&i.form.controls.productCode.errors),t.xp6(6),t.ekj("input-invalid",i.isSubmit&&i.form.controls.productName.errors),t.xp6(1),t.Q6J("ngIf",i.isSubmit&&i.form.controls.productName.errors),t.xp6(28),t.Q6J("disabled",1===i.form.controls.productType.value),t.xp6(6),t.Q6J("options",i.listProductType)("autoDisplayFirst",!1),t.xp6(1),t.Q6J("ngIf",1===i.form.controls.productType.value),t.xp6(5),t.Q6J("multiple",!1)("customUpload",!0)("chooseStyleClass","p-button-sm")("cancelStyleClass","p-button-sm")("showUploadButton",!1)("maxFileSize",512e3),t.xp6(2),t.Q6J("src",i.urlImage1)("imageStyle",t.DdM(44,F))("preview",!0),t.xp6(4),t.Q6J("multiple",!1)("customUpload",!0)("chooseStyleClass","p-button-sm")("cancelStyleClass","p-button-sm")("showUploadButton",!1)("maxFileSize",512e3),t.xp6(2),t.Q6J("src",i.urlImage2)("imageStyle",t.DdM(45,F))("preview",!0),t.xp6(4),t.Q6J("multiple",!1)("customUpload",!0)("chooseStyleClass","p-button-sm")("cancelStyleClass","p-button-sm")("showUploadButton",!1)("maxFileSize",512e3),t.xp6(2),t.Q6J("src",i.urlImage3)("imageStyle",t.DdM(46,F))("preview",!0),t.xp6(1),t.Q6J("ngIf",0===i.form.controls.productType.value)("ngIfElse",o),t.xp6(3),t.Akn(t.DdM(47,ne)),t.Q6J("disabled",i.setError)}},dependencies:[b.sg,b.O5,r._Y,r.Fj,r.JJ,r.JL,r.On,r.sg,r.u,u.e$z,u.iok,u.Yp0,m.jx,Z.o,f.zx,N.EU,T.u,G.Lt,Bt.p,Ot.E],styles:[".dat-line{border-top:1px dashed #9b9fa4;width:100%;margin:1rem 0}.custom-table{border:1px solid #d8dbe0}.custom-table tr{border:1px dashed #d8dbe0!important}.custom-table th,.custom-table td{border:none!important}.save{color:#1e90ff}.exit{color:red}.upload-avatar .p-fileupload-buttonbar{background:none;border:unset}.upload-avatar .p-fileupload-content{display:none}\n"],encapsulation:2}),n})();const oe=["dt1"],se=function(){return{"margin-top":"5px","margin-right":"5px"}};function re(n,l){if(1&n){const e=t.EpF();t.TgZ(0,"c-row")(1,"c-col",7)(2,"div",8)(3,"span",9),t._UZ(4,"i",10),t.qZA(),t.TgZ(5,"input",11),t.NdJ("input",function(o){t.CHM(e);const s=t.oxw();return t.KtG(s.applyFilterGlobal(o,"contains"))}),t.qZA()()(),t.TgZ(6,"c-col",12)(7,"p-button",13),t.NdJ("onClick",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.showDialogAdd())}),t.qZA()()()}2&n&&(t.xp6(7),t.Akn(t.DdM(2,se)))}function le(n,l){if(1&n){const e=t.EpF();t.TgZ(0,"tr")(1,"th",14),t._uU(2," Stt"),t.qZA(),t.TgZ(3,"th",15),t._UZ(4,"p-sortIcon",16),t._uU(5," T\xean v\u1eadt t\u01b0 "),t.qZA(),t.TgZ(6,"th",17),t._UZ(7,"p-sortIcon",18),t._uU(8,"T\xean ti\u1ebfng anh "),t.qZA(),t.TgZ(9,"th",19),t._UZ(10,"p-sortIcon",20),t._uU(11,"Nh\xf3m v\u1eadt t\u01b0 "),t.qZA(),t.TgZ(12,"th",21),t._UZ(13,"p-sortIcon",22),t._uU(14,"Lo\u1ea1i v\u1eadt t\u01b0 "),t.qZA(),t.TgZ(15,"th",23),t._UZ(16,"p-sortIcon",24),t._uU(17,"Gi\xe1 m\u1eb7c \u0111\u1ecbnh "),t.qZA(),t.TgZ(18,"th",25),t._UZ(19,"p-sortIcon",24),t._uU(20,"Brand "),t.qZA(),t.TgZ(21,"th",26),t._UZ(22,"p-sortIcon",24),t._uU(23,"Chi ti\u1ebft "),t.qZA(),t.TgZ(24,"th",27),t._UZ(25,"p-sortIcon",24),t._uU(26,"Chi ti\u1ebft xe "),t.qZA(),t.TgZ(27,"th",28),t._uU(28," Ch\u1ec9nh s\u1eeda "),t.TgZ(29,"i",29),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(),s=t.MAs(5);return t.KtG(o.clear(s))}),t.qZA()()()}}function ae(n,l){if(1&n){const e=t.EpF();t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.qZA(),t.TgZ(7,"td"),t._uU(8),t.qZA(),t.TgZ(9,"td"),t._uU(10),t.qZA(),t.TgZ(11,"td"),t._uU(12),t.qZA(),t.TgZ(13,"td"),t._uU(14),t.qZA(),t.TgZ(15,"td"),t._uU(16),t.qZA(),t.TgZ(17,"td"),t._uU(18),t.qZA(),t.TgZ(19,"td")(20,"i",30),t.NdJ("click",function(){const s=t.CHM(e).$implicit,a=t.oxw();return t.KtG(a.showDialogEdit(s.id))}),t.qZA(),t.TgZ(21,"i",31),t.NdJ("click",function(){const s=t.CHM(e).$implicit,a=t.oxw();return t.KtG(a.showDialogDelete(s.id))}),t.qZA()()()}if(2&n){const e=l.$implicit,i=l.rowIndex;t.xp6(2),t.Oqu(i+1),t.xp6(2),t.Oqu(e.productName),t.xp6(2),t.Oqu(e.productNameEN),t.xp6(2),t.Oqu(e.productGroup),t.xp6(2),t.Oqu(1===e.productType?"SET":"S\u1ea3n ph\u1ea9m l\u1ebb"),t.xp6(2),t.Oqu(e.basePrice),t.xp6(2),t.Oqu(e.brandName),t.xp6(2),t.Oqu(e.detail),t.xp6(2),t.Oqu(e.detailVehicle)}}const ce=function(){return{width:"50vw",maxWidth:"500px"}},ue=function(){return["code","name","description","lastModifyingUser"]},pe=[{path:"",redirectTo:"item",pathMatch:"full"},{path:"",data:{title:"Qu\u1ea3n l\xfd v\u1eadt t\u01b0"},children:[{path:"",pathMatch:"full",redirectTo:"item"},{path:"item",component:(()=>{class n{constructor(e,i,o,s,a,p,h){this.service=e,this.fb=i,this.messageService=o,this.location=s,this.confirmService=a,this.commonService=p,this.DialogService=h,this.itemList=[]}ngOnInit(){this.service.getAll().subscribe(e=>{this.itemList=e.data})}clear(e){e?.clear(),this.ngOnInit()}applyFilterGlobal(e,i){this.dt1?.filterGlobal(e.target.value,i)}showDialogEdit(e){this.DialogService.open(Q,{data:e,header:"Ch\u1ec9nh s\u1eeda v\u1eadt t\u01b0",style:{"max-width":"1200px"},contentStyle:{"max-height":"700px",overflow:"auto"},baseZIndex:1e4,closable:!1}).onClose.subscribe(o=>{o&&(this.ngOnInit(),this.clear(this.dt1))})}showDialogDelete(e){this.confirmService.confirm({key:"confirm-delete",message:"B\u1ea1n c\xf3 th\u1eadt s\u1ef1 mu\u1ed1n x\xf3a?",header:"Th\xf4ng b\xe1o",icon:"pi pi-exclamation-triangle",accept:()=>{this.service.delete(e).subscribe(i=>{1===i.code?(this.messageService.add({severity:"success",summary:"Success",detail:i.msg}),this.ngOnInit()):this.messageService.add({severity:"error",summary:"Error",detail:i.msg})})},reject:()=>{}})}showDialogAdd(){this.DialogService.open(Q,{data:null,header:"Th\xeam v\u1eadt t\u01b0",style:{"max-width":"1200px"},contentStyle:{"max-height":"700px",overflow:"auto"},baseZIndex:1e4,closable:!1}).onClose.subscribe(e=>{e&&(this.ngOnInit(),this.clear(this.dt1))})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(O),t.Y36(r.qu),t.Y36(m.ez),t.Y36(b.Ye),t.Y36(m.YP),t.Y36(x.v),t.Y36(d.xA))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-product-list"]],viewQuery:function(e,i){if(1&e&&t.Gf(oe,5),2&e){let o;t.iGM(o=t.CRH())&&(i.dt1=o.first)}},decls:9,vars:7,consts:[[1,"warp-content"],["key","confirm-delete",3,"baseZIndex"],["dataKey","id","styleClass","p-datatable-sm","responsiveLayout","scroll","breakpoint","1200px",3,"value","globalFilterFields"],["dt1",""],["pTemplate","caption"],["pTemplate","header"],["pTemplate","body"],[1,"d-flex","flex-row-start","align-items-center"],[1,"p-inputgroup",2,"width","60%"],[1,"p-inputgroup-addon"],[1,"pi","pi-search"],["pInputText","","type","text","placeholder","T\xecm ki\u1ebfm...",3,"input"],[1,"d-flex","justify-content-end"],["pTooltip","Th\xeam v\u1eadt t\u01b0","tooltipPosition","top","icon","pi pi-plus","styleClass","p-button-rounded p-button-secondary p-button-outlined",1,"p-button-sm","p-button-add-new",3,"onClick"],[2,"width","5%"],["pSortableColumn","productName",2,"width","12%"],["field","productName"],["pSortableColumn","productNameEN",2,"width","12%"],["field","productNameEN"],["pSortableColumn","itemGroupName",2,"width","10%"],["field","itemGroupName"],["pSortableColumn","productType",2,"width","8%"],["field","productType"],["pSortableColumn","basePrice",2,"width","8%"],["field","note"],["pSortableColumn","brandName",2,"width","10%"],["pSortableColumn","detail",2,"width","20%"],["pSortableColumn","detailVehicle"],[2,"width","6%"],["pTooltip","Click to refresh",1,"pi","pi-sync",2,"cursor","pointer",3,"click"],["pTooltip","Ch\u1ec9nh s\u1eeda",1,"pi","pi-user-edit","btn-icon-table","edit",2,"margin-right","8px",3,"click"],["pTooltip","X\xf3a",1,"pi","pi-trash","btn-icon-table","remove",2,"margin-left","8px","margin-right","8px",3,"click"]],template:function(e,i){1&e&&(t.TgZ(0,"c-container",0),t._UZ(1,"p-toast")(2,"p-confirmDialog",1),t.TgZ(3,"c-row")(4,"p-table",2,3),t.YNc(6,re,8,3,"ng-template",4),t.YNc(7,le,30,0,"ng-template",5),t.YNc(8,ae,22,9,"ng-template",6),t.qZA()()()),2&e&&(t.xp6(2),t.Akn(t.DdM(5,ce)),t.Q6J("baseZIndex",1e4),t.xp6(2),t.Q6J("value",i.itemList)("globalFilterFields",t.DdM(6,ue)))},dependencies:[u.e$z,u.iok,u.Yp0,E.FN,m.jx,C.iA,C.lQ,C.fz,Z.o,f.zx,S.Q,T.u]}),n})(),data:{title:"Danh s\xe1ch v\u1eadt t\u01b0"}},{path:"item-group",component:it,data:{title:"Nh\xf3m v\u1eadt t\u01b0"}},{path:"unit-of-measure",component:dt,data:{title:"\u0110\u01a1n v\u1ecb t\xednh"}},{path:"item-attribute",component:Pt,data:{title:"Chi ti\u1ebft v\u1eadt t\u01b0"}}]}];let me=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[_.Bz.forChild(pe),_.Bz]}),n})();var de=c(2928),he=c(7893),ge=c(3336);let _e=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[me,b.ez,r.u5,r.UX,de.s,he.W,ge.b]}),n})()}}]);